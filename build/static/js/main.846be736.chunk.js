(this["webpackJsonpm5s-piombino"]=this["webpackJsonpm5s-piombino"]||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/bar-logo.4b904756.png"},139:function(e,t,a){},208:function(e,t,a){e.exports=a.p+"static/media/PBovio.735d64db.png"},244:function(e,t,a){e.exports=a(376)},249:function(e,t,a){},250:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),i=a.n(s),o=(a(249),a(104)),l=a(28),c=(a(250),a(5)),d=a.n(c),u=a(11),h=a(7),m=a(8),p=a(10),v=a(9),f=a(416),g=a(420),E=a(421),b=a(377),y=a(124),w=a.n(y),C=a(120),k=a.n(C),O=(a(139),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"root"},r.a.createElement(f.a,{position:"static",className:"appBar"},r.a.createElement(g.a,null,r.a.createElement(b.a,{edge:"start",className:"menuButton",color:"inherit","aria-label":"logout",href:"/login",alt:"Logout"},r.a.createElement(w.a,{style:{color:"#fbc02d"}})),r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:k.a,alt:"",height:"45px",width:"200px"})),r.a.createElement(E.a,{color:"inherit",href:"/login"},"Accedi"))))}}]),a}(n.Component)),S=O,x=a(206),j=a.n(x),N=a(422),T=a(457),P=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"root"},r.a.createElement(f.a,{position:"static",className:"appBar"},r.a.createElement(g.a,null,r.a.createElement(b.a,{edge:"start",className:"menuButton",color:"inherit","aria-label":"menu",href:"/login"},r.a.createElement(j.a,{fontSize:"large",style:{color:"#ffffff"}})),r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:k.a,alt:"",height:"45px",width:"200px"})),r.a.createElement(N.a,{color:"secondary",badgeContent:"!",anchorOrigin:{vertical:"bottom",horizontal:"right"},invisible:this.props.isConfirmed},r.a.createElement("a",{href:"/profile"},r.a.createElement(T.a,{alt:this.props.username,src:this.props.avatar,href:"/profile"}))))))}}]),a}(n.Component),A=P,D=a(14),I=a.n(D),z=function e(t){Object(h.a)(this,e),this.isAuthenticated=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={authorized:!1,userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:""},null!==this.token){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,I.a.post("/server/login/auth",{token:this.token}).then((function(e){!0===e.data.authorized&&(t.authorized=!0,t.userID=e.data.decoded.userID,t.username=e.data.decoded.username,t.avatar=e.data.decoded.avatar,t.isConfirmed=e.data.decoded.isConfirmed,t.isAdmin=e.data.decoded.isAdmin,t.isSuperUser=e.data.decoded.isSuperUser,t.isBanned=e.data.decoded.isBanned)})).catch((function(e){console.log(e)}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),this.token=t},B=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isAuthenticated:!1,userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new z(localStorage.getItem("t")),e.next=3,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 3:this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return!0===this.state.isAuthenticated?r.a.createElement(A,{avatar:this.state.avatar,isConfirmed:this.state.isConfirmed}):r.a.createElement(S,null)}}]),a}(n.Component),R=a(23),U=a(2),M=a(24),L=a(15),F=a(428),W=a(229),V=a(425),_=a(58),q=a(427),H=a(423),J=a(426),G=a(424),X=a(79),Z=a.n(X),Q=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"lastPost",style:{padding:"8px"}},r.a.createElement(H.a,{style:{margin:"auto",width:"220px",height:"220px",backgroundColor:"#f5e2004a"},elevation:5},r.a.createElement(G.a,{style:{marginTop:"8px"}},r.a.createElement(Z.a,{style:{marginRight:"200px",color:"#ff4a4a"}}),r.a.createElement(V.a,{container:!0,spacing:0,className:"lastPost",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0,style:{height:"20px",overflow:"hidden"}},r.a.createElement(_.a,{variant:"subtitle2",style:{overflow:"hidden"}},this.props.title)),r.a.createElement(V.a,{item:!0,style:{margin:"5px"}},r.a.createElement(_.a,{color:"textSecondary"},void 0===this.props.data?"":this.props.data.substring(0,10).replace(/-/g,"/"))),r.a.createElement(V.a,{item:!0},r.a.createElement("a",{href:"/posts/"+this.props.urlTitle},r.a.createElement(T.a,{alt:"",src:this.props.image,style:{width:80,height:80}}))))),r.a.createElement(J.a,null,r.a.createElement(E.a,{size:"small",color:"secondary",style:{marginTop:"15px"},href:"/posts/"+this.props.urlTitle},"Leggi"))))}}]),a}(n.Component),Y=a(80),$=a.n(Y),K=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"lastEvent",style:{padding:"8px"}},r.a.createElement(H.a,{style:{margin:"auto",width:"220px",height:"220px",backgroundColor:"#f5e2004a"},elevation:5},r.a.createElement(G.a,{style:{marginTop:"8px"}},r.a.createElement(V.a,{container:!0,spacing:0,className:"lastPost",alignItems:"flex-end"},r.a.createElement($.a,{style:{marginRight:"200px",color:"#ff4a4a"}}),r.a.createElement(V.a,{item:!0,style:{height:"20px",overflow:"hidden"}},r.a.createElement(_.a,{variant:"subtitle2",style:{overflow:"hidden"}},this.props.title)),r.a.createElement(V.a,{item:!0,style:{margin:"5px"}},r.a.createElement(_.a,{color:"textSecondary"},void 0===this.props.data?"":this.props.data.substring(0,10).replace(/-/g,"/"))),r.a.createElement(V.a,{item:!0},r.a.createElement("a",{href:"/events/"+this.props.eventID},r.a.createElement(T.a,{alt:"",src:this.props.image,style:{width:80,height:80}}))))),r.a.createElement(J.a,null,r.a.createElement(E.a,{size:"small",color:"secondary",style:{marginTop:"15px"},href:"/events/"+this.props.eventID},"Leggi"))))}}]),a}(n.Component),ee=a(458),te=a(81),ae=a.n(te),ne=a(207),re=a.n(ne),se=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"lastEvent",style:{padding:"8px"}},r.a.createElement(H.a,{style:{margin:"auto",width:"220px",height:"220px",backgroundColor:"#f5e2004a"},elevation:5},r.a.createElement(G.a,{style:{marginTop:"8px"}},r.a.createElement(V.a,{container:!0,spacing:0,className:"lastPost",alignItems:"flex-end"},r.a.createElement(ae.a,{style:{marginRight:"200px",color:"#ff4a4a"}}),r.a.createElement(V.a,{item:!0,style:{height:"20px",overflow:"hidden"}},r.a.createElement(_.a,{variant:"subtitle2",style:{overflow:"hidden"}},this.props.title)),r.a.createElement(V.a,{item:!0,style:{margin:"5px"}},r.a.createElement("div",null,!0===this.props.state?r.a.createElement(ee.a,{size:"small",label:"Attivo",style:{backgroundColor:"#449c43",color:"#ffffff",width:"76px"}}):r.a.createElement(ee.a,{size:"small",label:"Non attivo",style:{backgroundColor:"#ef2d2d",color:"#ffffff",width:"76px"}}))),r.a.createElement(V.a,{item:!0},r.a.createElement("a",{href:"/polls/"+this.props.pollID},r.a.createElement(T.a,{alt:"",src:this.props.image,style:{width:70,height:70,backgroundColor:"#ffde857a"}},r.a.createElement(re.a,{fontSize:"large"})))))),r.a.createElement(J.a,null,r.a.createElement(E.a,{size:"small",color:"secondary",style:{marginTop:"15px"},href:"/polls/"+this.props.pollID},"Leggi"))))}}]),a}(n.Component),ie=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,lastPosts:[],lastEvents:[],lastPolls:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/posts?page=999").then((function(e){return e.json()})).then((function(e){return t.setState({lastPosts:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/events/allEvents?page=999").then((function(e){return e.json()})).then((function(e){return t.setState({lastEvents:e})})).catch(console.log);case 4:return e.next=6,fetch("/server/polls/allPolls?page=999").then((function(e){return e.json()})).then((function(e){return t.setState({lastPolls:e})})).catch(console.log);case 6:this.setState({loaded:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showLastPosts",value:function(){var e,t=[],a=Object(R.a)(this.state.lastPosts);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Q,{key:n._id,title:n.title,data:n.data,image:n.image,urlTitle:n.urlTitle}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"showLastEvents",value:function(){var e,t=[],a=Object(R.a)(this.state.lastEvents);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(K,{key:n._id,title:n.title,data:n.data,image:n.image,eventID:n._id}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"showLastPolls",value:function(){var e,t=[],a=Object(R.a)(this.state.lastPolls);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(se,{key:n._id,title:n.title,state:n.isActive,pollID:n._id}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"lastElements",style:{display:"inline-flex",flexFlow:"wrap",textAlign:"-webkit-center",justifyContent:"center"}},this.showLastPosts(),r.a.createElement(q.a,null),this.showLastEvents(),r.a.createElement(q.a,null),this.showLastPolls())}}]),a}(n.Component),oe=a(209),le=a.n(oe),ce=a(210),de=a.n(ce),ue=a(211),he=a.n(ue),me=a(208),pe=a.n(me),ve=(a(367),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={home:!0,tabs:[],loaded:!1,selectedTab:0,t:'{"blocks":[{"key":"qv3l","text":"Testo","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":6,"length":11,"style":"BOLD"},{"offset":23,"length":6,"style":"ITALIC"}],"entityRanges":[],"data":{}}],"entityMap":{}}',value:0},n.changeTab=n.changeTab.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/homepageTabs").then((function(e){return e.json()})).then((function(e){return t.setState({tabs:e,loaded:!0})})).catch(console.log());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changeTab",value:function(e){0===e?this.setState({home:!0}):this.setState({t:e,home:!1})}},{key:"showTab",value:function(){if(!1===this.state.home){var e=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(this.state.t)));return r.a.createElement("div",null,r.a.createElement(M.Editor,{editorState:e,readOnly:!0,toolbarHidden:!0}))}return r.a.createElement("div",null,r.a.createElement(ie,null))}},{key:"showTabs",value:function(){var e,t=this,a=[],n=Object(R.a)(this.state.tabs);try{var s=function(){var n=e.value;a.push(r.a.createElement(E.a,{key:n._id,onClick:function(){return t.changeTab(n.content)},style:{color:"#fcb02d"}},n.title))};for(n.s();!(e=n.n()).done;)s()}catch(i){n.e(i)}finally{n.f()}return a}},{key:"render",value:function(){var e=this;return!1===this.state.loaded?r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",{className:"home",style:{padding:8}},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"800px"}},r.a.createElement(V.a,{container:!0,spacing:1},r.a.createElement(V.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement("img",{src:pe.a,alt:"",style:{maxWidth:"100%"}})),r.a.createElement(W.a,{square:!0,style:{justifyContent:"space-between"}},r.a.createElement(E.a,{style:{color:"#fcb02d"},onClick:function(){return e.changeTab(0)}},"Home"),this.showTabs()),r.a.createElement(V.a,{item:!0},this.showTab())),r.a.createElement("div",{style:{padding:"5px"}},r.a.createElement("a",{href:"https://www.facebook.com/Movimento5StellePiombino",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(le.a,{size:"large",style:{color:"#fcb02d",marginLeft:"5px",marginRight:"5px"}})),r.a.createElement("a",{href:"https://instagram.com/movimento5stellepiombino",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(de.a,{size:"large",style:{color:"#fcb02d",marginLeft:"5px",marginRight:"5px"}})),r.a.createElement("a",{href:"https://www.youtube.com/user/piombino5stelle",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(he.a,{size:"large",style:{color:"#fcb02d",marginLeft:"5px",marginRight:"5px"}})))),r.a.createElement("br",null),r.a.createElement(_.a,{variant:"caption",style:{color:"ligthGray",fontSize:"9px"}},"Powered by ",r.a.createElement("a",{href:"https://www.facebook.com/Santo1991",target:"_blank",rel:"noopener noreferrer",style:{color:"gray"}},"Francesco Santini")))}}]),a}(n.Component)),fe=a(451),ge=a(212),Ee=a.n(ge),be=a(453),ye=(a(368),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={usernameOrEmail:"",password:"",userNotFound:!1,wrongPassword:!1,authenticated:!1,errors:!1},n.login=n.login.bind(Object(U.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleUsernameOrEmailChange=n.handleUsernameOrEmailChange.bind(Object(U.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(U.a)(n)),n.register=n.register.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){localStorage.clear()}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleUsernameOrEmailChange",value:function(e){this.setState({usernameOrEmail:e.target.value,userNotFound:!1})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value,wrongPassword:!1})}},{key:"login",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.post("/server/login",{usernameOrEmail:this.state.usernameOrEmail,password:this.state.password}).then((function(e){e.data.token?(localStorage.setItem("t",e.data.token),t=!0):e.data.userNotFound?a=!0:e.data.wrongPassword?n=!0:r=!0})).catch((function(e){console.log(e),r=!0}));case 6:!0===t?(this.setState({authenticated:!0}),window.location.replace("/profile")):!0===a?this.setState({userNotFound:!0}):!0===n?this.setState({wrongPassword:!0}):!0===r&&this.setState({errors:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){window.location.replace("/register")}},{key:"render",value:function(){return r.a.createElement("div",{className:"margin"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(Ee.a,{fontSize:"large"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{autoFocus:!0,required:!0,error:this.state.userNotFound,FormHelperTextProps:{hidden:!this.state.userNotFound},helperText:"Utente non trovato!",id:"usernameOrEmail",onChange:this.handleUsernameOrEmailChange,label:"Username o Email"}))),r.a.createElement(V.a,{container:!0,spacing:1,className:"password",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{id:"password",required:!0,error:this.state.wrongPassword,FormHelperTextProps:{hidden:!this.state.wrongPassword},helperText:"Password errata!",type:"password",label:"Password",onChange:this.handlePasswordChange}))),r.a.createElement(V.a,{container:!0,spacing:1,className:"password",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"LoginButton",onClick:this.login},"Login")),r.a.createElement(V.a,{item:!0},r.a.createElement("a",{href:"/resetPassword",style:{color:"#fcb02d",fontSize:"12px"}},"Password dimenticata?")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Ops! Qualcosa sembra essere andato storto...")))),r.a.createElement(q.a,{variant:"middle"}),r.a.createElement(V.a,{container:!0,spacing:1,className:"password",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h6"},"Non hai un account?"))),r.a.createElement(V.a,{container:!0,spacing:1,className:"password",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"RegisterButton",onClick:this.register},"Registrati")))))}}]),a}(n.Component)),we=a(430),Ce=a(455),ke=(a(369),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={username:"",name:"",surname:"",dateOfBirth:"",email:"",password1:"",password2:"",check1:!1,check2:!1,passwordTooShort:!1,passwordsDoesntMatch:!1,underage:!1,registered:!1,userAlreadyExist:!1,errors:!1},n.defaultDate=n.defaultDate.bind(Object(U.a)(n)),n.handleUsernameChange=n.handleUsernameChange.bind(Object(U.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(U.a)(n)),n.handleSurnameChange=n.handleSurnameChange.bind(Object(U.a)(n)),n.handleDateOfBirthChange=n.handleDateOfBirthChange.bind(Object(U.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(U.a)(n)),n.handlePassword1Change=n.handlePassword1Change.bind(Object(U.a)(n)),n.handlePassword2Change=n.handlePassword2Change.bind(Object(U.a)(n)),n.handleCheck1Change=n.handleCheck1Change.bind(Object(U.a)(n)),n.handleCheck2Change=n.handleCheck2Change.bind(Object(U.a)(n)),n.register=n.register.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleSurnameChange",value:function(e){this.setState({surname:e.target.value,userAlreadyExist:!1})}},{key:"handleDateOfBirthChange",value:function(e){this.setState({dateOfBirth:e.target.value}),e.target.value>this.defaultDate()?this.setState({underage:!0}):e.target.value<=this.defaultDate()&&this.setState({underage:!1})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value,userAlreadyExist:!1})}},{key:"handlePassword1Change",value:function(e){this.setState({password1:e.target.value}),e.target.value!==this.state.password2?this.setState({passwordsDoesntMatch:!0}):e.target.value===this.state.password2&&this.setState({passwordsDoesntMatch:!1}),this.state.password1.length<7?this.setState({passwordTooShort:!0}):this.state.password1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"handlePassword2Change",value:function(e){this.setState({password2:e.target.value}),this.state.password1!==e.target.value?this.setState({passwordsDoesntMatch:!0}):this.state.password1===e.target.value&&this.setState({passwordsDoesntMatch:!1}),this.state.password1.length<7?this.setState({passwordTooShort:!0}):this.state.password1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"handleCheck1Change",value:function(e){this.setState({check1:e.target.checked})}},{key:"handleCheck2Change",value:function(e){this.setState({check2:e.target.checked})}},{key:"defaultDate",value:function(){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;return a<10&&(a="0"+a),(e.getFullYear()-18+"-"+a+"-"+t).toString()}},{key:"register",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.dateOfBirth&&this.setState({dateOfBirth:this.defaultDate().toString()}),this.setState({registered:!1,userAlreadyExist:!1,errors:!1}),!1!==this.state.passwordTooShort||!1!==this.state.passwordsDoesntMatch||!1!==this.state.underage||!0!==this.state.check1||!0!==this.state.check2){e.next=9;break}return t=!1,a=!1,n=!1,e.next=8,I.a.post("/server/users/register",{username:this.state.username,password:this.state.password1,name:this.state.name,surname:this.state.surname,dateOfBirth:this.state.dateOfBirth.toString(),email:this.state.email}).then((function(e){e.data.saved?t=!0:e.data.userAlreadyExist&&(a=!0)})).catch((function(e){console.log(e),n=!0}));case 8:!0===t?(this.setState({registered:!0}),window.scrollTo(0,200)):!0===a?(this.setState({userAlreadyExist:!0}),window.scrollTo(0,200)):!0===n&&(this.setState({errors:!0}),window.scrollTo(0,200));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"Register",hidden:this.state.registered},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"username",label:"Username",required:!0,disabled:this.state.registered,error:this.state.userAlreadyExist,helperText:"Username e/o Email gi\xe0 in uso!",FormHelperTextProps:{hidden:!this.state.userAlreadyExist},onChange:this.handleUsernameChange,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"name",label:"Nome",required:!0,disabled:this.state.registered,onChange:this.handleNameChange,defaultValue:"",helperText:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"surname",label:"Cognome",required:!0,disabled:this.state.registered,onChange:this.handleSurnameChange,defaultValue:"",helperText:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{style:{width:"182.4px"},id:"dateOfBirth",label:"Data di nascita",type:"date",required:!0,disabled:this.state.registered,error:this.state.underage,helperText:"Devi avere almeno 18 anni!",FormHelperTextProps:{hidden:!this.state.underage},onChange:this.handleDateOfBirthChange,defaultValue:this.defaultDate(),className:"field",InputLabelProps:{shrink:!0}})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"email",type:"email",label:"Email",required:!0,disabled:this.state.registered,onChange:this.handleEmailChange,defaultValue:"",helperText:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password1",type:"password",label:"Password",required:!0,disabled:this.state.registered,error:this.state.passwordTooShort,helperText:"Lunghezza minima 8 caratteri!",FormHelperTextProps:{hidden:!this.state.passwordTooShort},onChange:this.handlePassword1Change,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password2",type:"password",label:"Ripeti password",required:!0,disabled:this.state.registered,error:this.state.passwordsDoesntMatch,helperText:"Le password non corrispondono!",FormHelperTextProps:{hidden:!this.state.passwordsDoesntMatch},onChange:this.handlePassword2Change,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"checks"},r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.check1,onChange:this.handleCheck1Change,name:"check1"}),label:"Accetto i termini di utilizzo"}),r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.check2,onChange:this.handleCheck2Change,name:"check2"}),label:"Acconsento al trattamento dei dati personali"}))),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.register,disabled:this.state.registered},"Invia")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.userAlreadyExist},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Username e/o Email gi\xe0 utilizzati!")),r.a.createElement("div",{hidden:!this.state.registered},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Account creato! Clicca sul link che ti abbiamo inviato via Email per confermarlo! Il link ha validit\xe0 di un'ora."))))))}}]),a}(n.Component)),Oe=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={email:"",userNotFound:!1,sended:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(U.a)(n)),n.send=n.send.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value,userNotFound:!1})}},{key:"send",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,e.next=5,I.a.post("/server/users/resetPassword",{email:this.state.email}).then((function(e){e.data.sended?t=!0:e.data.noResults&&(a=!0)})).catch((function(e){console.log(e),n=!0}));case 5:this.setState({sended:t,userNotFound:a,errors:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"resetPassword"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{style:{width:"250px"},autoFocus:!0,required:!0,error:this.state.userNotFound,FormHelperTextProps:{hidden:!this.state.userNotFound},helperText:"Utente non trovato!",id:"email",onChange:this.handleEmailChange,label:"Inserisci la tua Email"})),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.send},"Invia")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.userNotFound},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Questa email non \xe8 associata ad alcun account!")),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Ops! Qualcosa sembra essere andato storto...")),r.a.createElement("div",{hidden:!this.state.sended},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Abbiamo inviato una email al tuo indirizzo di posta. Clicca sul link allegato per accedere!"))))))}}]),a}(n.Component),Se=a(213),xe=a.n(Se),je=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=xe()(n.props.location.search).t;return n.state={username:n.props.match.params.username,token:r,password1:"",password2:"",passwordTooShort:!1,passwordsDoesntMatch:!1,saved:!1,userNotFound:!1,unauthorized:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handlePassword1Change=n.handlePassword1Change.bind(Object(U.a)(n)),n.handlePassword2Change=n.handlePassword2Change.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handlePassword1Change",value:function(e){this.setState({password1:e.target.value}),e.target.value!==this.state.password2?this.setState({passwordsDoesntMatch:!0}):e.target.value===this.state.password2&&this.setState({passwordsDoesntMatch:!1}),this.state.password1.length<7?this.setState({passwordTooShort:!0}):this.state.password1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"handlePassword2Change",value:function(e){this.setState({password2:e.target.value}),this.state.password1!==e.target.value?this.setState({passwordsDoesntMatch:!0}):this.state.password1===e.target.value&&this.setState({passwordsDoesntMatch:!1}),this.state.password1.length<7?this.setState({passwordTooShort:!0}):this.state.password1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.post("/server/users/restorePassword",{username:this.state.username,token:this.state.token,password:this.state.password1}).then((function(e){e.data.saved?t=!0:e.data.userNotFound?a=!0:e.data.unauthorized&&(n=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({saved:t,userNotFound:a,unauthorized:n,errors:r}),window.scrollTo(0,5e3),!0===t&&setTimeout((function(){window.location.replace("/login")}),3e3);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"resetPassword"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password1",type:"password",label:"Password",required:!0,error:this.state.passwordTooShort,helperText:"Lunghezza minima 8 caratteri!",FormHelperTextProps:{hidden:!this.state.passwordTooShort},onChange:this.handlePassword1Change,defaultValue:"",variant:"standard",disabled:this.state.saved})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password2",type:"password",label:"Ripeti password",required:!0,error:this.state.passwordsDoesntMatch,helperText:"Le password non corrispondono!",FormHelperTextProps:{hidden:!this.state.passwordsDoesntMatch},onChange:this.handlePassword2Change,defaultValue:"",variant:"standard",disabled:this.state.saved})),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save},"Invia")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.userNotFound},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Nome utente inesistente!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Ops! Qualcosa sembra essere andato storto...")),r.a.createElement("div",{hidden:!this.state.saved},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Password cambiata correttamente!"))))))}}]),a}(n.Component),Ne=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={confirmed:!1,userNotFound:!1,userAlreadyConfirmed:!1,errors:!1},n.goToLoginPage=n.goToLoginPage.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.get("/server/login/confirm/"+this.props.match.params.username+this.props.location.search).then((function(e){console.log(e),e.data.confirmed?t=!0:e.data.userNotFound?a=!0:e.data.alreadyConfirmed&&(n=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({confirmed:t,userNotFound:a,userAlreadyConfirmed:n,errors:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goToLoginPage",value:function(){window.location.replace("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"Confirm",style:{padding:"8px"}},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.userNotFound},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non trovato!")),r.a.createElement("div",{hidden:!this.state.userAlreadyConfirmed},r.a.createElement(be.a,{variant:"filled",severity:"info",closeText:"close"},"Account utente gi\xe0 confermato.")),r.a.createElement("div",{hidden:!this.state.confirmed},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Account utente confermato!"),r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.goToLoginPage},"ACCEDI")))}}]),a}(n.Component),Te=a(452),Pe=a(108),Ae=a(84),De=a.n(Ae),Ie=a(214),ze=a.n(Ie),Be=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"singlePost"},r.a.createElement("div",{className:"root",style:{flexGrow:1}},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"800px"}},r.a.createElement(V.a,{container:!0,spacing:1},r.a.createElement(V.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(V.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:1},r.a.createElement(V.a,{item:!0},r.a.createElement(Pe.a,{className:"image",style:{maxWidth:"100%",maxHeight:"100%"},href:"/posts/"+this.props.urlTitle},r.a.createElement("img",{className:"img",style:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},alt:this.props.image,src:this.props.image}))),r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(_.a,{gutterBottom:!0,variant:"h6"},this.props.title)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"body2",color:"textSecondary"},"Pubblicazione: ",void 0===this.props.data?"":this.props.data.substring(0,10).replace(/-/g,"/"))),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"body2"},r.a.createElement("a",{href:"/posts/"+this.props.urlTitle},"Leggi il comunicato")))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{style:{padding:8,margin:10,color:"#fbc02d"}},r.a.createElement(N.a,{badgeContent:this.props.likes,color:"secondary",showZero:!0,max:99},r.a.createElement(De.a,{fontSize:"large",style:{marginRight:"8px"}})),"  ",r.a.createElement(N.a,{badgeContent:this.props.comments,color:"secondary",showZero:!0,max:99},r.a.createElement(ze.a,{fontSize:"large",style:{marginLeft:"8px"}})))))))))}}]),a}(n.Component),Re=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,posts:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/posts"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({posts:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/posts/numberOfPosts").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalPosts})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.posts.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono comunicati"));var e,t=[],a=Object(R.a)(this.state.posts);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Be,{key:n._id,title:n.title,subtitle:n.subtitle,urlTitle:n.urlTitle,data:n.data,image:n.image,author:n.author,likes:n.likes.length,comments:n.comments.length}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/posts?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allPosts"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),Ue=a(215),Me=a.n(Ue),Le=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"singleEvent"},r.a.createElement("div",{className:"root",style:{flexGrow:1}},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"800px"}},r.a.createElement(V.a,{container:!0,spacing:2},r.a.createElement(V.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(V.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(V.a,{item:!0},r.a.createElement(Pe.a,{className:"image",style:{maxWidth:"100%",maxHeight:"100%"},href:"/events/"+this.props.eventID},r.a.createElement("img",{className:"img",style:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},alt:this.props.image,src:this.props.image}))),r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(_.a,{gutterBottom:!0,variant:"h6"},this.props.title),r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},void 0===this.props.data?"":this.props.data.substring(0,10).replace(/-/g,"/")),r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},this.props.location)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"body2"},r.a.createElement("a",{href:"/events/"+this.props.eventID},"Vai all'evento")))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{style:{padding:8,margin:10,color:"#fbc02d"}},r.a.createElement(N.a,{badgeContent:this.props.participants,color:"secondary",showZero:!0,max:99},r.a.createElement(Me.a,{fontSize:"large",style:{marginRight:"8px"}})))))))))}}]),a}(n.Component),Fe=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,events:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/events/allEvents"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({events:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/events/numberOfAllEvents").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalEvents})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.events.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono eventi"));var e,t=[],a=Object(R.a)(this.state.events);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Le,{key:n._id,eventID:n._id,title:n.title,image:n.image,data:n.data,location:n.location,participants:n.participants.length}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/events?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allEvents"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),We=a(216),Ve=a.n(We),_e=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getPollState",value:function(){return!0===this.props.state?r.a.createElement("span",{style:{color:"green"}},"Attivo"):r.a.createElement("span",{style:{color:"red"}},"Non attivo")}},{key:"render",value:function(){return r.a.createElement("div",{className:"singlePoll"},r.a.createElement("div",{className:"root",style:{flexGrow:1}},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"800px"}},r.a.createElement(V.a,{container:!0,spacing:2},r.a.createElement(V.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(V.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(_.a,{gutterBottom:!0,variant:"h6"},this.props.title),r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},"Stato: ",this.getPollState())),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"body2"},r.a.createElement("a",{href:"/polls/"+this.props.pollID},"Vai al sondaggio")))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{style:{padding:8,margin:10,color:"#fbc02d"}},r.a.createElement(N.a,{badgeContent:this.props.voters,color:"secondary",showZero:!0,max:99},r.a.createElement(Ve.a,{fontSize:"large",style:{marginRight:"8px"}})))))))))}}]),a}(n.Component),qe=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,polls:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/polls/allPolls"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({polls:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/polls/numberOfAllPolls").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalPolls})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.polls.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono sondaggi!"));var e,t=[],a=Object(R.a)(this.state.polls);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(_e,{key:n._id,pollID:n._id,title:n.title,data:n.data,state:n.isActive,voters:n.voters.length}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/polls?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allPolls"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),He=a(130),Je=a.n(He),Ge=(a(66),a(431)),Xe=a(456),Ze=a(434),Qe=a(433),Ye=a(432),$e=a(131),Ke=a.n($e),et=a(217),tt=a.n(et),at=(a(370),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var s=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(n.props.content)));return n.state={user:{},loaded:!1,edit:!1,commentEdited:s,emptyComment:!1,deleted:!1,unauthorized:!1,noResults:!1,errors:!1,liked:!1},n.wrapper=r.a.createRef(),n.like=n.like.bind(Object(U.a)(n)),n.handleOpenEditTabs=n.handleOpenEditTabs.bind(Object(U.a)(n)),n.handleCloseEditTabs=n.handleCloseEditTabs.bind(Object(U.a)(n)),n.handleEditComment=n.handleEditComment.bind(Object(U.a)(n)),n.edit=n.edit.bind(Object(U.a)(n)),n.delete=n.delete.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleOpenEditTabs",value:function(){this.setState({edit:!0})}},{key:"handleCloseEditTabs",value:function(){this.setState({edit:!1})}},{key:"handleEditComment",value:function(e){this.setState({commentEdited:e,emptyComment:!1})}},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/users/"+this.props.userID).then((function(e){return e.json()})).then((function(e){return a.setState({user:e,loaded:!0})})).catch(console.log);case 2:if(""===this.props._username){e.next=7;break}return t=!1,e.next=6,I.a.post("/server/posts/"+this.props.urlTitle+"/"+this.props.commentID+"/verifyLike",{userID:this.props._userID}).then((function(e){!0===e.data.liked&&(t=!0)})).catch((function(e){console.log(e)}));case 6:this.setState({liked:t});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"like",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.liked||""===this.props._username){e.next=8;break}return t=!1,a=!1,n=!1,e.next=6,I.a.post("/server/posts/"+this.props.urlTitle+"/"+this.props.commentID+"/like",{userID:this.props._userID}).then((function(e){e.data.liked?t=!0:e.data.noResults&&(a=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({liked:t,noResults:a,errors:n}),window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Object(L.convertToRaw)(this.state.commentEdited.getCurrentContent()).blocks[0].text){e.next=5;break}this.setState({emptyComment:!0}),e.next=13;break;case 5:return t=!1,a=!1,n=!1,r=!1,e.next=11,I.a.put("/server/posts/"+this.props.urlTitle+"/"+this.props.commentID,{token:this.props.token,comment:JSON.stringify(Object(L.convertToRaw)(this.state.commentEdited.getCurrentContent()))}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 11:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&window.location.reload();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.patch("/server/posts/"+this.props.urlTitle+"/"+this.props.commentID,{token:this.props.token}).then((function(e){e.data.deleted?t=!0:e.data.unauthorized?a=!0:e.data.noResults&&(n=!0)})).then((function(e){console.log(e),r=!0}));case 6:this.setState({deleted:t,noResults:n,unauthorized:a,errors:r,edit:!1}),!0===t&&window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=!1;this.props._username!==this.props.user&&!0!==this.props._isSuperUser||(e=!0);var t=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(this.props.content)));return r.a.createElement("div",{className:"comment",ref:this.wrapper},r.a.createElement(H.a,{className:"card",elevation:5,style:{maxWidth:"1020px",margin:"auto"}},r.a.createElement(Ge.a,{avatar:r.a.createElement(T.a,{alt:"",src:this.state.user.avatar}),title:this.props.user,subheader:this.state.user.name+" "+this.state.user.surname}),r.a.createElement(q.a,{variant:"middle"}),r.a.createElement(G.a,null,r.a.createElement(M.Editor,{editorState:t,readOnly:!0,toolbarHidden:!0})),r.a.createElement(J.a,{disableSpacing:!0},r.a.createElement("div",{className:"bottomCard"},r.a.createElement("div",null,r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.liked,icon:r.a.createElement(De.a,{fontSize:"large"}),checkedIcon:r.a.createElement(Je.a,{fontSize:"large"}),name:"likes"}),onClick:this.like,label:this.props.likes})),r.a.createElement("div",{className:"actions",hidden:!e},r.a.createElement(b.a,{"aria-label":"Modifica",onClick:this.handleOpenEditTabs},r.a.createElement(Ke.a,null)),r.a.createElement(b.a,{"aria-label":"Elimina",onClick:this.delete},r.a.createElement(tt.a,null))),r.a.createElement(Xe.a,{open:this.state.edit,onClose:this.handleCloseEditTabs,fullWidth:!0,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Modifica"),r.a.createElement(Qe.a,null,r.a.createElement("div",null,r.a.createElement(M.Editor,{toolbar:{options:["emoji","link"]},editorState:this.state.commentEdited,onEditorStateChange:this.handleEditComment}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseEditTabs,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.edit,color:"secondary"},"Salva"))),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!"))))),r.a.createElement("br",null))}}]),a}(n.Component)),nt=(a(371),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createEmpty();return n.state={loaded:!1,postNotFound:!1,post:{},token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:"",comment:r,emptyComment:!1,commented:!1,noResults:!1,unauthorized:!1,errors:!1,liked:!1},n.formatData=n.formatData.bind(Object(U.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.like=n.like.bind(Object(U.a)(n)),n.handleCommentChange=n.handleCommentChange.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c,u,h=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/posts/"+this.props.match.params.urlTitle).then((function(e){return e.json()})).then((function(e){h.setState({post:e,loaded:!0})})).catch(console.log);case 2:return!0===this.state.post.noResults?this.setState({postNotFound:!0}):this.setState({content:Object(L.convertFromRaw)(JSON.parse(this.state.post.content))}),c=new z(localStorage.getItem("t")),e.next=6,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 6:if(this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l}),!0!==this.state.isAuthenticated){e.next=12;break}return u=!1,e.next=11,I.a.post("/server/posts/"+this.props.match.params.urlTitle+"/verifyLike",{userID:this.state.userID}).then((function(e){!0===e.data.liked&&(u=!0)})).catch((function(e){console.log(e)}));case 11:this.setState({liked:u});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleCommentChange",value:function(e){this.setState({comment:e,emptyComment:!1})}},{key:"formatData",value:function(e){return e.substring(0,10).replace(/-/g,"/")}},{key:"like",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.liked||!0!==this.state.isAuthenticated){e.next=8;break}return t=!1,a=!1,n=!1,e.next=6,I.a.post("/server/posts/"+this.state.post.urlTitle+"/like",{userID:this.state.userID}).then((function(e){e.data.liked?t=!0:e.data.noResults&&(a=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({liked:t,noResults:a,errors:n}),window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Object(L.convertToRaw)(this.state.comment.getCurrentContent()).blocks[0].text){e.next=5;break}this.setState({emptyComment:!0}),e.next=14;break;case 5:return t=!1,a=!1,n=!1,r=!1,e.next=11,I.a.post("/server/posts/"+this.state.post.urlTitle+"/comment",{token:this.state.token,comment:JSON.stringify(Object(L.convertToRaw)(this.state.comment.getCurrentContent()))}).then((function(e){e.data.commented?t=!0:e.data.noResults?a=!0:e.data.unauthorized&&(n=!0)})).catch((function(e){console.log(e),r=!0}));case 11:this.setState({commented:t,noResults:a,unauthorized:n,errors:r}),window.scrollTo(0,5e3),!0===t&&setTimeout((function(){window.location.reload()}),2e3);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showContent",value:function(){if(!1===this.state.loaded)return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}),r.a.createElement("br",null),r.a.createElement("br",null));if(!0===this.state.loaded&&!0===this.state.post.noResults)return r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Articolo non trovato"));if(!0===this.state.loaded&&""!==this.state.post.title){var e=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(this.state.post.content)));return r.a.createElement("div",null,r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0},this.state.post.title)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h5",gutterBottom:!0},this.state.post.subtitle)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"body1",gutterBottom:!0},"Pubblicato in data ",void 0===this.state.post.data?"":this.formatData(this.state.post.data))),r.a.createElement(V.a,{item:!0},r.a.createElement("img",{src:this.state.post.image,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})),r.a.createElement(V.a,{item:!0},r.a.createElement(M.Editor,{editorState:e,readOnly:!0,toolbarHidden:!0})),r.a.createElement(V.a,{item:!0},r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.liked,icon:r.a.createElement(De.a,{fontSize:"large"}),checkedIcon:r.a.createElement(Je.a,{fontSize:"large"}),name:"likes"}),onClick:this.like,label:this.state.post.likes.length})))))}}},{key:"showComments",value:function(){if(!0===this.state.loaded&&!0!==this.state.post.noResults){if(0===this.state.post.comments.length)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"info"},"Non ci sono commenti"));var e,t=[],a=Object(R.a)(this.state.post.comments);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(at,{key:n._id,urlTitle:this.state.post.urlTitle,token:this.state.token,commentID:n._id,userID:n.userID,user:n.user,content:n.content,likes:n.likes.length,_username:this.state.username,_userID:this.state.userID,_isAdmin:this.state.isAdmin,_isSuperUser:this.state.isSuperUser,_isBanned:this.state.isBanned}))}}catch(s){a.e(s)}finally{a.f()}return t}}},{key:"postComment",value:function(){if(!0===this.state.loaded&&!0!==this.state.post.noResults)return!1===this.state.isAuthenticated?r.a.createElement("div",{className:"noAuth"},r.a.createElement(be.a,{severity:"warning"},r.a.createElement("a",{href:"/login"},"Accedi")," o ",r.a.createElement("a",{href:"/register"},"registrati")," per commentare")):r.a.createElement("div",{className:"auth"},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement("div",{hidden:!this.state.emptyComment},r.a.createElement(be.a,{severity:"error"},"Il commento non pu\xf2 essere vuoto!")),r.a.createElement("div",{className:"newComment"},r.a.createElement(T.a,{alt:"",src:this.state.avatar,style:{width:56,height:56,marginRight:8,marginTop:32}}),r.a.createElement("div",{className:"editor",style:{width:"100%"}},r.a.createElement(M.Editor,{toolbar:{options:["emoji","link"]},editorState:this.state.comment,onEditorStateChange:this.handleCommentChange})),r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save,onSubmit:this.handleSubmit,disabled:this.state.commented},"Invia"))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"postDetail"},this.showContent(),r.a.createElement("br",null),this.showComments(),r.a.createElement("div",{className:"error",hidden:!this.state.post.noResults},r.a.createElement(be.a,{severity:"error"},"Articolo non trovato")),r.a.createElement("div",{className:"success",hidden:!this.state.commented},r.a.createElement(be.a,{severity:"success"},"Commento salvato")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")),r.a.createElement("div",{className:"comments"},this.postComment()))}}]),a}(n.Component)),rt=a(429),st=a(435),it=a(437),ot=a(436),lt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={user:{},loaded:!1,userNotFound:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/users/"+this.props.userID).then((function(e){return e.json()})).then((function(e){return t.setState({user:e,loaded:!0})})).catch(console.log);case 2:this.state.user.username||this.setState({userNotFound:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"participant"},r.a.createElement(rt.a,{style:{width:"100%",maxWidth:360}},r.a.createElement(st.a,null,r.a.createElement(ot.a,null,r.a.createElement(T.a,{src:this.state.user.avatar,alt:this.props.username})),r.a.createElement(it.a,{primary:this.state.user.username,secondary:this.state.user.name+" "+this.state.user.surname}))))}}]),a}(n.Component),ct=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,eventNotFound:!1,event:{},token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:"",participation:!1,noResults:!1,unauthorized:!1,errors:!1},n.formatData=n.formatData.bind(Object(U.a)(n)),n.participate=n.participate.bind(Object(U.a)(n)),n.participants=n.participants.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c,u,h=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/events/"+this.props.match.params.eventID).then((function(e){return e.json()})).then((function(e){return h.setState({event:e,loaded:!0})})).catch(console.log);case 2:return this.state.event.title||this.setState({eventNotFound:!0}),c=new z(localStorage.getItem("t")),e.next=6,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 6:if(this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l}),!0!==this.state.isAuthenticated){e.next=12;break}return u=!1,e.next=11,I.a.post("/server/events/"+this.props.match.params.eventID,{token:this.state.token}).then((function(e){!0===e.data.participation&&(u=!0)})).catch((function(e){console.log(e)}));case 11:this.setState({participation:u});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatData",value:function(e){return e.substring(0,10).replace(/-/g,"/")+" "+e.substring(11,16)}},{key:"participate",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.participation||!0!==this.state.isAuthenticated){e.next=8;break}return t=!1,a=!1,n=!1,e.next=6,I.a.post("/server/events/"+this.state.event._id+"/participate",{token:this.state.token}).then((function(e){e.data.participate?t=!0:e.data.noResults&&(a=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({participation:t,noResults:a,errors:n}),window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"participants",value:function(){if(!0===this.state.loaded&&!0!==this.state.event.noResults){if(0===this.state.event.participants.length)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"info"},"Non ci sono partecipanti a questo evento."));var e,t=[],a=Object(R.a)(this.state.event.participants);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(lt,{key:n._id,userID:n._id}))}}catch(s){a.e(s)}finally{a.f()}return t}}},{key:"showContent",value:function(){if(!1===this.state.loaded)return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}),r.a.createElement("br",null),r.a.createElement("br",null));if(!0===this.state.loaded){var e=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(this.state.event.content)));return r.a.createElement("div",null,r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0},this.state.event.title)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h6",gutterBottom:!0},void 0===this.state.event.data?"":this.formatData(this.state.event.data)),r.a.createElement(_.a,{variant:"body1",gutterBottom:!0},this.state.event.location)),r.a.createElement(V.a,{item:!0},r.a.createElement("img",{src:this.state.event.image,alt:"",style:{maxWidth:"90%"}})),r.a.createElement(V.a,{item:!0}),r.a.createElement(V.a,{item:!0},r.a.createElement(M.Editor,{editorState:e,readOnly:!0,toolbarHidden:!0})),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:this.state.participation,onClick:this.participate},r.a.createElement(E.a,{variant:"contained",color:"secondary",style:{marginBottom:15,marginTop:15}},"Partecipa")),r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},"Partecipanti: ",this.state.event.participants.length),r.a.createElement("div",null,this.participants()),r.a.createElement("br",null)),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"success",hidden:!this.state.participation},r.a.createElement(be.a,{severity:"success"},"Parteciperai a questo evento!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!"))))),r.a.createElement("br",null))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"eventDetail",style:{padding:"8px"}},this.showContent())}}]),a}(n.Component),dt=a(438),ut=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={voted:!1,noResults:!1,unauthorized:!1,errors:!1},n.vote=n.vote.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"vote",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.props.voted||""===this.props.username){e.next=9;break}return t=!1,a=!1,n=!1,r=!1,e.next=7,I.a.post("/server/polls/"+this.props.pollID+"/vote",{token:this.props.token,optionID:this.props.id}).then((function(e){e.data.voted?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 7:this.setState({voted:t,noResults:n,unauthorized:a,errors:r}),window.location.reload();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"option",style:{padding:"10px"}},r.a.createElement("div",{hidden:!this.props.voted,style:{textAlign:"left"}},this.props.content.toUpperCase()," ",r.a.createElement("span",{style:{marginLeft:"10px",color:"gray"}},"\t "+this.props.votesPercentile.toFixed(2)+" %"),r.a.createElement(dt.a,{color:"secondary",variant:"determinate",value:this.props.votesPercentile,style:{marginTop:"8px",backgroundColor:"#ffeaf1"}})),r.a.createElement("div",{hidden:this.props.voted,style:{alignSelf:"rigth"}},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.vote,disabled:this.props.voted||!this.props.isActive||!this.props.isConfirmed,style:{height:"50px",width:"200px"}},this.props.content)),r.a.createElement("div",{className:"noResults",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},r.a.createElement("a",{href:"/profile"},"Conferma il tuo account")," per votare")))}}]),a}(n.Component),ht=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,pollNotFound:!1,poll:{},token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:"",alreadyVoted:null,noResults:!1,unauthorized:!1,errors:!1},n.getPollState=n.getPollState.bind(Object(U.a)(n)),n.showOptions=n.showOptions.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c,u,h=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/polls/"+this.props.match.params.pollID).then((function(e){return e.json()})).then((function(e){return h.setState({poll:e,loaded:!0})})).catch(console.log);case 2:return this.state.poll.title||this.setState({pollNotFound:!0}),c=new z(localStorage.getItem("t")),e.next=6,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 6:if(this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l}),!0!==this.state.isAuthenticated){e.next=12;break}return u=!1,e.next=11,I.a.post("/server/polls/"+this.props.match.params.pollID,{token:this.state.token}).then((function(e){!0===e.data.alreadyVoted&&(u=!0)})).catch((function(e){console.log(e)}));case 11:this.setState({alreadyVoted:u});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPollState",value:function(){return!0===this.state.poll.isActive?r.a.createElement("span",{style:{color:"green"}},"Attivo"):r.a.createElement("span",{style:{color:"red"}},"Non attivo")}},{key:"showOptions",value:function(){if(!0===this.state.loaded){if(0===this.state.poll.options.length)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"info"},"Non ci sono opzioni"));var e,t=0,a=Object(R.a)(this.state.poll.options);try{for(a.s();!(e=a.n()).done;){t+=e.value.votes}}catch(l){a.e(l)}finally{a.f()}var n,s=[],i=Object(R.a)(this.state.poll.options);try{for(i.s();!(n=i.n()).done;){var o=n.value;s.push(r.a.createElement(ut,{key:o.id,pollID:this.state.poll._id,id:o.id,content:o.name,votesPercentile:100*o.votes/t,voted:this.state.alreadyVoted,isActive:this.state.poll.isActive,username:this.state.username,token:this.state.token,userID:this.state.userID,isAdmin:this.state.isAdmin,isSuperUser:this.state.isSuperUser,isConfirmed:this.state.isConfirmed,isBanned:this.state.isBanned}))}}catch(l){i.e(l)}finally{i.f()}return s}}},{key:"showContent",value:function(){if(!1===this.state.loaded)return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}),r.a.createElement("br",null),r.a.createElement("br",null));if(!0===this.state.loaded){var e=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(this.state.poll.content)));return r.a.createElement("div",null,r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0},this.state.poll.title)),r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h6",gutterBottom:!0},"Stato: ",this.getPollState())),r.a.createElement(V.a,{item:!0},r.a.createElement(M.Editor,{editorState:e,readOnly:!0,toolbarHidden:!0})),r.a.createElement("br",null),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:this.state.alreadyVoted},r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},"VOTA")),r.a.createElement("div",{hidden:!this.state.alreadyVoted},r.a.createElement(_.a,{variant:"body2",gutterBottom:!0},"RISULTATI ",r.a.createElement("span",{hidden:!this.state.poll.isActive}," PARZIALI"))),r.a.createElement("div",{hidden:this.state.poll.isActive,style:{marginBottom:"8px"}},r.a.createElement(be.a,{severity:"warning"},"Questo sondaggio non \xe8 attivo!")),r.a.createElement("div",{hidden:this.state.isAuthenticated,style:{marginBottom:"8px"}},r.a.createElement(be.a,{severity:"warning"},r.a.createElement("a",{href:"/login"},"Accedi")," o ",r.a.createElement("a",{href:"/register"},"registrati")," per votare questo sondaggio! "))),r.a.createElement(V.a,{item:!0,style:{textAlign:"center"}},this.showOptions()),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"success",hidden:!this.state.alreadyVoted},r.a.createElement(be.a,{severity:"success"},"Hai gi\xe0 votato in questo sondaggio!")),r.a.createElement("div",{hidden:!this.state.isAuthenticated},r.a.createElement("div",{className:"notConfirmed",hidden:this.state.isConfirmed},r.a.createElement(be.a,{severity:"warning"},r.a.createElement("a",{href:"/profile"},"Conferma il tuo account")," per votare!")))))))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"pollDetail",style:{padding:"8px"}},this.showContent(),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))}}]),a}(n.Component),mt=a(89),pt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new z(localStorage.getItem("t")),e.next=3,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 3:this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(mt.a)(t,["component"]);return!0===this.state.isAuthenticated?r.a.createElement(l.b,Object.assign({},n,{render:function(t){return r.a.createElement(a,Object.assign({},t,{userID:e.state.userID,token:e.state.token,username:e.state.username,isConfirmed:e.state.isConfirmed,isAdmin:e.state.isAdmin,isSuperUser:e.state.isSuperUser,isBanned:e.state.isBanned}))}})):!1===this.state.isAuthenticated?r.a.createElement(l.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement(F.a,{color:"secondary"}))}}]),a}(n.Component),vt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new z(localStorage.getItem("t")),e.next=3,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 3:this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(mt.a)(t,["component"]);return!0!==this.state.isAdmin&&!0!==this.state.isSuperUser||!1!==this.state.isBanned?!1===this.state.isAdmin||!0===this.state.isBanned?r.a.createElement(l.a,{to:"/profile"}):!1===this.state.isAuthenticated?r.a.createElement(l.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement(F.a,{color:"secondary"})):r.a.createElement(l.b,Object.assign({},n,{render:function(t){return r.a.createElement(a,Object.assign({},t,{userID:e.state.userID,username:e.state.username,avatar:e.state.avatar,token:e.state.token,isConfirmed:e.state.isConfirmed,isAdmin:e.state.isAdmin,isSuperUser:e.state.isSuperUser,isBanned:e.state.isBanned}))}}))}}]),a}(n.Component),ft=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={token:localStorage.getItem("t"),isAuthenticated:"",userID:"",username:"",avatar:"",isConfirmed:"",isAdmin:"",isSuperUser:"",isBanned:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new z(localStorage.getItem("t")),e.next=3,c.isAuthenticated().then((function(e){t=e.authorized,a=e.userID,n=e.username,r=e.avatar,s=e.isConfirmed,i=e.isAdmin,o=e.isSuperUser,l=e.isBanned}));case 3:this.setState({isAuthenticated:t,userID:a,username:n,avatar:r,isConfirmed:s,isAdmin:i,isSuperUser:o,isBanned:l});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(mt.a)(t,["component"]);return!0===this.state.isSuperUser&&!1===this.state.isBanned?r.a.createElement(l.b,Object.assign({},n,{render:function(t){return r.a.createElement(a,Object.assign({},t,{userID:e.state.userID,username:e.state.username,avatar:e.state.avatar,isConfirmed:e.state.isConfirmed,isAdmin:e.state.isAdmin,isSuperUser:e.state.isSuperUser,isBanned:e.state.isBanned}))}})):!1===this.state.isSuperUser||!0===this.state.isBanned?r.a.createElement(l.a,{to:"/profile"}):!1===this.state.isAuthenticated?r.a.createElement(l.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement(F.a,{color:"secondary"}))}}]),a}(n.Component),gt=a(85),Et=a.n(gt),bt=a(134),yt=a.n(bt),wt=a(218),Ct=a.n(wt),kt=a(220),Ot=a.n(kt),St=a(219),xt=a.n(St),jt=a(221),Nt=a.n(jt),Tt=(a(373),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={emailSended:!1,editProfile:!1,avatar:null,file:null,noFileSelected:!1,uploading:!1,updated:!1,oldPassword:"",newPassword1:"",newPassword2:"",name:"",surname:"",dateOfBirth:"",email:"",registrationDate:"",oldPasswordError:!1,passwordTooShort:!1,passwordsDoesntMatch:!1,saved:!1,sended:!1,errors:!1,unauthorized:!1,noResults:!1},n.sendEmail=n.sendEmail.bind(Object(U.a)(n)),n.showEditSection=n.showEditSection.bind(Object(U.a)(n)),n.hideEditSection=n.hideEditSection.bind(Object(U.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleAvatarChange=n.handleAvatarChange.bind(Object(U.a)(n)),n.handleOldPasswordChange=n.handleOldPasswordChange.bind(Object(U.a)(n)),n.handlePassword1Change=n.handlePassword1Change.bind(Object(U.a)(n)),n.handlePassword2Change=n.handlePassword2Change.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n.goToAdminPanel=n.goToAdminPanel.bind(Object(U.a)(n)),n.goToSuperUserPanel=n.goToSuperUserPanel.bind(Object(U.a)(n)),n.logout=n.logout.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/server/users/"+this.props.userID,{token:this.props.token}).then((function(e){t=e.data.avatar,a=e.data.name,n=e.data.surname})).catch((function(e){console.log(e)}));case 2:this.setState({avatar:t,name:a,surname:n});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendEmail",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.post("/server/users/resend",{token:this.props.token}).then((function(e){e.data.sended?t=!0:e.data.noResults?a=!0:e.data.unauthorized&&(n=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({sended:t,noResults:a,unauthorized:n,errors:r}),window.scrollTo(0,5e3);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleAvatarChange",value:function(){this.setState({uploading:!0});var e=this.props.userID,t=this.props.token,a=document.getElementById("avatar").files[0];null==a&&this.setState({noFileSelected:!0});var n=new XMLHttpRequest;n.open("GET","/server/sign-s3?file-name="+this.props.userID+".jpg&file-type="+a.type),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)var r=JSON.parse(n.responseText),s=new XMLHttpRequest,i=new Promise((function(n){s.open("PUT",r.returnData.url),s.onreadystatechange=function(){4===s.readyState&&s.status},s.send(a),n(r.returnData.url),setTimeout((function(){i.then(function(){var a=Object(u.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:!1,!1,I.a.put("/server/users/"+e+"/upload",{token:t,avatar:n}).then((function(e){console.log(e),e.data.updated&&(!0,window.location.reload())})).catch((function(e){console.log(e),!0}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}),3e3)}));else console.log("Errore!")},n.send(),this.setState({uploading:!1})}},{key:"handleOldPasswordChange",value:function(e){this.setState({oldPassword:e.target.value,oldPasswordError:!1})}},{key:"handlePassword1Change",value:function(e){this.setState({newPassword1:e.target.value}),e.target.value!==this.state.newPassword2?this.setState({passwordsDoesntMatch:!0}):e.target.value===this.state.newPassword2&&this.setState({passwordsDoesntMatch:!1}),this.state.newPassword1.length<7?this.setState({passwordTooShort:!0}):this.state.newPassword1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"handlePassword2Change",value:function(e){this.setState({newPassword2:e.target.value}),this.state.newPassword1!==e.target.value?this.setState({passwordsDoesntMatch:!0}):this.state.newPassword1===e.target.value&&this.setState({passwordsDoesntMatch:!1}),this.state.newPassword1.length<7?this.setState({passwordTooShort:!0}):this.state.newPassword1.length>=7&&this.setState({passwordTooShort:!1}),this.forceUpdate()}},{key:"showEditSection",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({editProfile:!0}),t=!1,a=!1,n=!1,e.next=6,I.a.post("/server/users/"+this.props.userID,{token:this.props.token}).then((function(e){e.data.unauthorized?t=!0:e.data.noResults?a=!0:null!=e.data.email&&(r=e.data.name,s=e.data.surname,i=e.data.dateOfBirth,o=e.data.registrationDate,l=e.data.email)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({unauthorized:t,noResults:a,errors:n,oldPassword:void 0,name:r,surname:s,dateOfBirth:i.substring(0,10).replace(/-/g,"/"),registrationDate:o.substring(0,10).replace(/-/g,"/"),email:l});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hideEditSection",value:function(){this.setState({editProfile:!1})}},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.oldPasswordError||null===this.state.oldPassword||!1!==this.state.passwordTooShort||null===this.state.newPassword1||!1!==this.state.passwordsDoesntMatch||null===this.state.newPassword2){e.next=10;break}return t=!1,a=!1,n=!1,r=!1,s=!1,e.next=8,I.a.put("/server/users/"+this.props.userID,{token:this.props.token,oldPassword:this.state.oldPassword,newPassword:this.state.newPassword1,name:this.state.name,surname:this.state.surname,dateOfBirth:this.state.dateOfBirth}).then((function(e){e.data.userNotFound?t=!0:e.data.wrongPassword?a=!0:e.data.unauthorized?n=!0:e.data.edited&&(r=!0)})).catch((function(e){console.log(e),s=!0}));case 8:this.setState({noResults:t,oldPasswordError:a,unauthorized:n,errors:s,saved:r}),!0===r&&(window.scrollTo(0,5e3),setTimeout((function(){window.location.reload()}),2e3));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goToAdminPanel",value:function(){window.location.replace("/admin")}},{key:"goToSuperUserPanel",value:function(){window.location.replace("/superUser")}},{key:"logout",value:function(){window.location.replace("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"profile"},r.a.createElement(V.a,{container:!0,spacing:1},r.a.createElement(V.a,{item:!0,xs:1,sm:!0,container:!0},r.a.createElement(V.a,{item:!0,xs:!0,container:!0,spacing:1},r.a.createElement(V.a,{item:!0,xs:!0,container:!0,justify:"flex-start",spacing:1,style:{textAlign:"-webkit-center"}},r.a.createElement(V.a,{item:!0},r.a.createElement(T.a,{alt:"",src:this.state.avatar,style:{width:200,height:200}})),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:this.state.uploading},r.a.createElement("input",{accept:"image/jpeg",className:"input",id:"avatar",type:"file",onChange:this.handleAvatarChange}),r.a.createElement("label",{htmlFor:"avatar",className:"photoIcon"},r.a.createElement(b.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(Et.a,{color:"secondary",fontSize:"large"})))),r.a.createElement("div",{className:"loading",hidden:!this.state.uploading},r.a.createElement(F.a,{color:"secondary"})),r.a.createElement("div",{hidden:!this.state.noFileSelected},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Nessun file caricato!")))),r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(_.a,{gutterBottom:!0,variant:"subtitle1"},void 0===this.state.name?"":this.state.name+" "+this.state.surname),r.a.createElement("div",{className:"chips",hidden:this.props.isBanned,style:{display:"block"}},r.a.createElement("div",{className:"verified",hidden:!this.props.isConfirmed},r.a.createElement(ee.a,{size:"small",icon:r.a.createElement(yt.a,{style:{color:"#ffffff"}}),label:"Verificato",style:{backgroundColor:"#449c43",color:"#ffffff"}})),r.a.createElement("div",{className:"notVerified",hidden:this.props.isConfirmed},r.a.createElement(ee.a,{size:"small",icon:r.a.createElement(Ct.a,{style:{color:"#ffffff"}}),label:"Da verificare",style:{backgroundColor:"#ef2d2d",color:"#ffffff"}})," ",r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",color:"secondary",className:"button",startIcon:r.a.createElement(xt.a,null),onClick:this.sendEmail},"INVIA NUOVAMENTE EMAIL")),r.a.createElement("div",{className:"verified",hidden:!this.props.isSuperUser},r.a.createElement(ee.a,{size:"small",icon:r.a.createElement(yt.a,{style:{color:"#ffffff"}}),label:"Super User",style:{backgroundColor:"#2196f3",color:"#ffffff"}})),r.a.createElement("div",{className:"verified",hidden:!this.props.isAdmin},r.a.createElement(ee.a,{size:"small",icon:r.a.createElement(yt.a,{style:{color:"#ffffff"}}),label:"Admin",style:{backgroundColor:"#fcb02d",color:"#ffffff"}}))),r.a.createElement("div",{hidden:!this.props.isBanned},r.a.createElement(ee.a,{icon:r.a.createElement(Ot.a,{style:{color:"#ffffff"}}),label:"ACCOUNT BLOCCATO",style:{backgroundColor:"#ef2d2d",color:"#ffffff",marginTop:"3px"}})),r.a.createElement("div",{hidden:this.state.editProfile},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:"button",startIcon:r.a.createElement(Ke.a,null),disabled:this.props.isBanned,onClick:this.showEditSection},"MODIFICA PROFILO")),r.a.createElement("div",{hidden:!(this.props.isAdmin||this.props.isSuperUser)},r.a.createElement("div",{hidden:this.state.editProfile},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:"button",startIcon:r.a.createElement(Nt.a,null),onClick:this.goToAdminPanel},"PANNELLO ADMIN"))),r.a.createElement("div",{hidden:this.state.editProfile},r.a.createElement(E.a,{variant:"contained",style:{backgroundColor:"#1c1e21",color:"#ffffff"},className:"button",startIcon:r.a.createElement(w.a,null),onClick:this.logout},"LOGOUT")),r.a.createElement("div",{className:"editSection",hidden:!this.state.editProfile},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"oldPassword",type:"password",label:"Vecchia password",required:!0,onChange:this.handleOldPasswordChange,error:this.state.oldPasswordError,FormHelperTextProps:{hidden:!this.state.oldPasswordError},helperText:"Password errata!",variant:"standard",disabled:this.state.saved})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password1",type:"password",label:"Password",required:!0,error:this.state.passwordTooShort,helperText:"Lunghezza minima 8 caratteri!",FormHelperTextProps:{hidden:!this.state.passwordTooShort},onChange:this.handlePassword1Change,defaultValue:"",variant:"standard",disabled:this.state.saved})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"password2",type:"password",label:"Ripeti password",required:!0,error:this.state.passwordsDoesntMatch,helperText:"Le password non corrispondono!",FormHelperTextProps:{hidden:!this.state.passwordsDoesntMatch},onChange:this.handlePassword2Change,defaultValue:"",variant:"standard",disabled:this.state.saved})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"name",label:"Nome",required:!0,disabled:!0,value:this.state.name,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"surname",label:"Cognome",required:!0,disabled:!0,value:this.state.surname,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"email",label:"Email",required:!0,disabled:!0,value:this.state.email,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"dateOfBirth",label:"Data di nascita",required:!0,disabled:!0,value:void 0===this.state.dateOfBirth?"":this.state.dateOfBirth,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"registrationDate",label:"Data registrazione",required:!0,disabled:!0,value:void 0===this.state.registrationDate?"":this.state.registrationDate,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.hideEditSection,disabled:this.state.saved},"Annulla"),r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save,disabled:this.state.saved},"Salva")))))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.sended},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Email inviata! Clicca il link allegato entro un'ora per confermare l'account!")),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.noResults},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non trovato!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Non disponi delle autorizzazioni necessarie!")))))))}}]),a}(n.Component)),Pt=a(222),At=a.n(Pt),Dt=a(223),It=a.n(Dt),zt=a(224),Bt=a.n(zt),Rt=(a(374),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).homepageTabs=n.homepageTabs.bind(Object(U.a)(n)),n.newPost=n.newPost.bind(Object(U.a)(n)),n.newEvent=n.newEvent.bind(Object(U.a)(n)),n.newPoll=n.newPoll.bind(Object(U.a)(n)),n.allPosts=n.allPosts.bind(Object(U.a)(n)),n.allEvents=n.allEvents.bind(Object(U.a)(n)),n.allPolls=n.allPolls.bind(Object(U.a)(n)),n.usersList=n.usersList.bind(Object(U.a)(n)),n.goBack=n.goBack.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"homepageTabs",value:function(){window.location.replace("/admin/homepageTabs")}},{key:"newPost",value:function(){window.location.replace("/admin/newPost")}},{key:"newEvent",value:function(){window.location.replace("/admin/newEvent")}},{key:"newPoll",value:function(){window.location.replace("/admin/newPoll")}},{key:"allPosts",value:function(){window.location.replace("/admin/allPosts?page=1")}},{key:"allEvents",value:function(){window.location.replace("/admin/allEvents?page=1")}},{key:"allPolls",value:function(){window.location.replace("/admin/allPolls?page=1")}},{key:"usersList",value:function(){window.location.replace("/admin/usersList")}},{key:"goBack",value:function(){window.location.replace("/profile")}},{key:"render",value:function(){return r.a.createElement("div",{className:"adminPanel"},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(_.a,{variant:"h6"},"PANNELLO ADMIN")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(At.a,null),disabled:!this.props.isSuperUser,onClick:this.homepageTabs},"TABS HOMEPAGE")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(Z.a,null),disabled:!this.props.isAdmin,onClick:this.newPost},"Nuovo comunicato")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement($.a,null),disabled:!this.props.isAdmin,onClick:this.newEvent},"Nuovo evento")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(ae.a,null),disabled:!this.props.isAdmin,onClick:this.newPoll},"Nuovo sondaggio")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(Z.a,null),onClick:this.allPosts},"Tutti i comunicati")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement($.a,null),onClick:this.allEvents},"Tutti gli eventi")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(ae.a,null),onClick:this.allPolls},"Tutti i sondaggi")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",color:"secondary",className:"adminButton",startIcon:r.a.createElement(It.a,null),onClick:this.usersList},"Lista utenti")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",style:{backgroundColor:"#1c1e21",color:"#ffffff"},className:"adminButton",startIcon:r.a.createElement(Bt.a,null),onClick:this.goBack},"INDIETRO"))))}}]),a}(n.Component)),Ut=a(439),Mt=a(225),Lt=a.n(Mt),Ft=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a);var r=(n=t.call(this,e)).props.title,s=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(n.props.content)));return n.state={title:r,contentEdited:s,edit:!1,edited:!1,unauthorized:!1,noResults:!1,deleted:!1,errors:!1},n.handleTitleChange=n.handleTitleChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleOpenEditTabs=n.handleOpenEditTabs.bind(Object(U.a)(n)),n.handleCloseEditTabs=n.handleCloseEditTabs.bind(Object(U.a)(n)),n.edit=n.edit.bind(Object(U.a)(n)),n.delete=n.delete.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleOpenEditTabs",value:function(){this.setState({edit:!0})}},{key:"handleCloseEditTabs",value:function(){this.setState({edit:!1})}},{key:"handleContentChange",value:function(e){this.setState({contentEdited:e})}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"edit",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.put("/server/homepageTabs/"+this.props.tabID,{token:this.props.token,title:this.state.title,content:JSON.stringify(Object(L.convertToRaw)(this.state.contentEdited.getCurrentContent()))}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,a=!1,n=!1,r=!1,!0!==this.props.isSuperUser){e.next=11;break}return e.next=7,I.a.patch("/server/homepageTabs/"+this.props.tabID,{token:this.props.token}).then((function(e){e.data.deleted?n=!0:e.data.unauthorized?t=!0:e.data.noResults&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 7:this.setState({unauthorized:t,deleted:n,noResults:a,errors:r}),!0===n&&window.location.reload(),e.next=12;break;case 11:this.setState({unauthorized:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"singleTab"},r.a.createElement("br",null),r.a.createElement(H.a,{style:{padding:"10px",margin:"auto",maxWidth:"400px"}},r.a.createElement(G.a,null,r.a.createElement(_.a,{color:"textSecondary",gutterBottom:!0},this.props.title)),r.a.createElement(J.a,null,r.a.createElement(E.a,{size:"small",onClick:this.handleOpenEditTabs},"MODIFICA"),r.a.createElement(E.a,{size:"small",onClick:this.delete},"ELIMINA")),r.a.createElement(Xe.a,{open:this.state.edit,onClose:this.handleCloseEditTabs,fullWidth:!0,"aria-labelledby":"form-dialog-title",style:{maxHeight:"90%"}},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Modifica"),r.a.createElement(Qe.a,null,r.a.createElement("div",{style:{marginBottom:"80px"}},r.a.createElement(fe.a,{className:"field",id:"title",label:"Titolo",required:!0,disabled:this.state.edited,onChange:this.handleTitleChange,defaultValue:this.state.title,variant:"standard"}),r.a.createElement(M.Editor,{editorState:this.state.contentEdited,onEditorStateChange:this.handleContentChange}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseEditTabs,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.edit,color:"secondary"},"Salva")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.edited},r.a.createElement(be.a,{severity:"success"},"Contenuto salvato con successo!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))))}}]),a}(n.Component),Wt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createEmpty();return n.state={tabs:[],newTabTitle:"",newTabContent:r,loaded:!1,addTab:!1,saved:!1,unauthorized:!1,tabAlreadyExist:!1,errors:!1},n.loading=n.loading.bind(Object(U.a)(n)),n.showTabs=n.showTabs.bind(Object(U.a)(n)),n.handleOpenAddTab=n.handleOpenAddTab.bind(Object(U.a)(n)),n.handleCloseAddTab=n.handleCloseAddTab.bind(Object(U.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.addTab=n.addTab.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleOpenAddTab",value:function(){this.setState({addTab:!0})}},{key:"handleCloseAddTab",value:function(){this.setState({addTab:!1})}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({newTabContent:e})}},{key:"addTab",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.post("/server/homepageTabs/addTab",{token:this.props.token,title:this.state.title,content:JSON.stringify(Object(L.convertToRaw)(this.state.newTabContent.getCurrentContent()))}).then((function(e){e.data.saved?t=!0:e.data.tabAlreadyExist?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({saved:t,tabAlreadyExist:n,unauthorized:a,errors:r}),!0===t&&setTimeout((function(){window.location.replace("/admin/homepageTabs")}),2e3);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/homepageTabs").then((function(e){return e.json()})).then((function(e){return t.setState({tabs:e,loaded:!0})})).catch(console.log);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{color:"secondary"}))}},{key:"showTabs",value:function(){if(0===this.state.tabs.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono tabs"));var e,t=[],a=Object(R.a)(this.state.tabs);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Ft,{key:n._id,tabID:n._id,title:n.title,content:n.content,token:this.props.token,isSuperUser:this.props.isSuperUser}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"homepageTabs"},this.loading(),this.showTabs(),r.a.createElement("br",null),r.a.createElement(Ut.a,{color:"secondary",elevation:8,"aria-label":"add",onClick:this.handleOpenAddTab},r.a.createElement(Lt.a,null)),r.a.createElement(Xe.a,{open:this.state.addTab,onClose:this.handleCloseAddTab,fullWidth:!0,"aria-labelledby":"form-dialog-title",style:{maxHeight:"90%"}},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Crea nuova tab"),r.a.createElement(Qe.a,null,r.a.createElement("div",{style:{marginBottom:"80px"}},r.a.createElement(fe.a,{className:"field",id:"title",label:"Titolo",required:!0,disabled:this.state.edited,onChange:this.handleTitleChange,variant:"standard"}),r.a.createElement(M.Editor,{editorState:this.state.newTabContent,onEditorStateChange:this.handleContentChange}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseAddTab,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.addTab,color:"secondary"},"Salva")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.saved},r.a.createElement(be.a,{severity:"success"},"Tab aggiunta con successo!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"tabAlreadyExist",hidden:!this.state.tabAlreadyExist},r.a.createElement(be.a,{severity:"warning"},"Esiste gi\xe0 una tab con questo nome!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!"))))}}]),a}(n.Component),Vt=(a(62),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createEmpty();return n.state={title:"",subtitle:"",image:"https://m5spiombino.s3.amazonaws.com/default.jpg",uploading:!1,content:r,id:"",saved:!1,postAlreadyExist:!1,unauthorized:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(U.a)(n)),n.handleSubtitleChange=n.handleSubtitleChange.bind(Object(U.a)(n)),n.handleImageChange=n.handleImageChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubtitleChange",value:function(e){this.setState({subtitle:e.target.value})}},{key:"handleImageChange",value:function(){var e=this;this.setState({uploading:!0});var t=document.getElementById("image").files[0];null==t&&this.setState({noFileSelected:!0});var a=new XMLHttpRequest;a.open("GET","/server/sign-s3?file-name="+t.name+"&file-type="+t.type),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var n=JSON.parse(a.responseText),r=new XMLHttpRequest;new Promise((function(e,a){r.open("PUT",n.returnData.url),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&n.returnData.url},r.send(t),e(n.returnData.url)})).then((function(t){return e.setState({image:t})}))}else console.log("Errore!")},a.send()}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.title){e.next=10;break}return t=!1,a=!1,n=!1,r=!1,e.next=7,I.a.post("/server/posts/newPost",{token:this.props.token,id:this.state.id,title:this.state.title,subtitle:this.state.subtitle,image:this.state.image,content:JSON.stringify(Object(L.convertToRaw)(this.state.content.getCurrentContent()))}).then((function(e){e.data.created?t=!0:e.data.postAlreadyExist?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 7:this.setState({saved:t,unauthorized:a,postAlreadyExist:n,errors:r}),window.scrollTo(0,5e3),!0===t&&setTimeout((function(){window.location.replace("/admin/allPosts?page=1")}),2e3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/posts/numberOfPosts").then((function(e){return e.json()})).then((function(e){return t.setState({id:e.totalPosts})})).catch(console.log);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"newPost"},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"newPost",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"title",label:"Titolo",required:!0,disabled:this.state.saved,error:this.state.postAlreadyExist,helperText:"Esiste gi\xe0 un comunicato con lo stesso nome!",FormHelperTextProps:{hidden:!this.state.postAlreadyExist},onChange:this.handleTitleChange,fullWidth:!0,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"subtitle",label:"Sottotitolo",required:!0,disabled:this.state.saved,onChange:this.handleSubtitleChange,fullWidth:!0,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"author",label:"Autore",required:!0,disabled:!0,defaultValue:this.props.username,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement("img",{src:this.state.image,alt:"",style:{maxWidth:"90%"},v:!0})),r.a.createElement(V.a,{item:!0},r.a.createElement("input",{accept:"image/jpeg",className:"input",id:"image",type:"file",onChange:this.handleImageChange}),r.a.createElement("label",{htmlFor:"image",className:"photoIcon"},r.a.createElement(b.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(Et.a,{fontSize:"large"})))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"editor"},r.a.createElement(M.Editor,{editorState:this.state.content,onEditorStateChange:this.handleContentChange}))),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save,disabled:this.state.saved},"Salva")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.postAlreadyExist},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Esiste gi\xe0 un comunicato con lo stesso nome!")),r.a.createElement("div",{hidden:!this.state.saved},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Comunicato pubblicato correttamente!")))))))}}]),a}(n.Component)),_t=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createEmpty();return n.state={id:"",title:"",image:"https://m5spiombino.s3.amazonaws.com/default.jpg",content:r,data:"",location:"",pastDate:!1,saved:!1,eventAlreadyExist:!1,unauthorized:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(U.a)(n)),n.handleImageChange=n.handleImageChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleDataChange=n.handleDataChange.bind(Object(U.a)(n)),n.handleLocationChange=n.handleLocationChange.bind(Object(U.a)(n)),n.defaultDate=n.defaultDate.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleImageChange",value:function(){var e=this;this.setState({uploading:!0});var t=document.getElementById("image").files[0];null==t&&this.setState({noFileSelected:!0});var a=new XMLHttpRequest;a.open("GET","/server/sign-s3?file-name="+t.name+"&file-type="+t.type),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var n=JSON.parse(a.responseText),r=new XMLHttpRequest;new Promise((function(e,a){r.open("PUT",n.returnData.url),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&n.returnData.url},r.send(t),e(n.returnData.url)})).then((function(t){return e.setState({image:t})}))}else console.log("Errore!")},a.send()}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"handleDataChange",value:function(e){this.setState({data:e.target.value}),e.target.value<this.defaultDate()?this.setState({pastDate:!0}):e.target.value>=this.defaultDate()&&this.setState({pastDate:!1})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"defaultDate",value:function(){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;return a<10&&(a="0"+a),(e.getFullYear()+"-"+a+"-"+t).toString()}},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/events/numberOfAllEvents").then((function(e){return e.json()})).then((function(e){return t.setState({id:e.totalEvents})})).catch(console.log);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.state.pastDate){e.next=10;break}return t=!1,a=!1,n=!1,r=!1,e.next=7,I.a.post("/server/events/newEvent",{token:this.props.token,id:this.state.id,title:this.state.title,image:this.state.image,content:JSON.stringify(Object(L.convertToRaw)(this.state.content.getCurrentContent())),data:this.state.data,location:this.state.location}).then((function(e){e.data.created?t=!0:e.data.unauthorized?n=!0:e.data.eventAlreadyExist&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 7:this.setState({saved:t,eventAlreadyExist:a,unauthorized:n,errors:r}),window.scrollTo(0,1e3),!0===t&&setTimeout((function(){window.location.replace("/admin/allEvents?page=1")}),2e3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"newEvent"},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"newEvent",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"title",label:"Titolo",required:!0,disabled:this.state.saved,error:this.state.eventAlreadyExist,helperText:"Esiste gi\xe0 un evento con lo stesso nome e la stessa data!",FormHelperTextProps:{hidden:!this.state.eventAlreadyExist},onChange:this.handleTitleChange,fullWidth:!0,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"author",label:"Autore",required:!0,disabled:!0,defaultValue:this.props.username,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement("img",{src:this.state.image,alt:"",style:{maxWidth:"90%"}})),r.a.createElement(V.a,{item:!0},r.a.createElement("input",{accept:"image/jpeg",className:"input",id:"image",type:"file",onChange:this.handleImageChange}),r.a.createElement("label",{htmlFor:"image",className:"photoIcon"},r.a.createElement(b.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(Et.a,{fontSize:"large"})))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"editor"},r.a.createElement(M.Editor,{editorState:this.state.content,onEditorStateChange:this.handleContentChange}))),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{id:"data",label:"Data",type:"datetime-local",disabled:this.state.saved,error:this.state.pastDate,helperText:"La data deve essere futura!",FormHelperTextProps:{hidden:!this.state.pastDate},onChange:this.handleDataChange,defaultValue:this.defaultDate(),className:"field",InputLabelProps:{shrink:!0}})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"location",label:"Luogo",required:!0,disabled:this.state.saved,onChange:this.handleLocationChange,fullWidth:!0,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save,disabled:this.state.saved},"Salva")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.eventAlreadyExist},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Esiste gi\xe0 un evento con lo stesso nome e la stessa data!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non autorizzato!")),r.a.createElement("div",{hidden:!this.state.saved},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Evento pubblicato correttamente!")))))))}}]),a}(n.Component),qt=a(440),Ht=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createEmpty();return n.state={title:"",content:r,isActive:!1,options:[],addOption:"",emptyOption:!1,saved:!1,pollAlreadyExist:!1,unauthorized:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleIsActiveChange=n.handleIsActiveChange.bind(Object(U.a)(n)),n.handleOptionChange=n.handleOptionChange.bind(Object(U.a)(n)),n.option=n.option.bind(Object(U.a)(n)),n.showOptions=n.showOptions.bind(Object(U.a)(n)),n.add=n.add.bind(Object(U.a)(n)),n.addOption=n.addOption.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"handleIsActiveChange",value:function(e){this.setState({isActive:e.target.checked})}},{key:"handleOptionChange",value:function(e){this.setState({addOption:e.target.value.toUpperCase(),emptyOption:!1})}},{key:"option",value:function(e,t){return r.a.createElement("div",{className:"option",key:e},"Opzione ",e+1," - ",t)}},{key:"showOptions",value:function(){var e,t=[],a=Object(R.a)(this.state.options);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(this.option(n.id,n.name))}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"add",value:function(){""!==this.state.addOption?(this.state.options.push({id:this.state.options.length,name:this.state.addOption,votes:0}),this.setState({addOption:""})):this.setState({emptyOption:!0})}},{key:"addOption",value:function(){return r.a.createElement("div",{className:"addOption"},r.a.createElement(fe.a,{className:"field",id:"option",label:"Aggiungi opzione",disabled:this.state.saved,onChange:this.handleOptionChange,error:this.state.emptyOption,helperText:"L' opzione deve avere un contenuto!",FormHelperTextProps:{hidden:!this.state.emptyOption},fullWidth:!0,value:this.state.addOption,variant:"standard"}),r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.add,disabled:this.state.saved},"Aggiungi"))}},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.title){e.next=10;break}return t=!1,a=!1,n=!1,r=!1,e.next=7,I.a.post("/server/polls/newPoll",{token:this.props.token,title:this.state.title,content:JSON.stringify(Object(L.convertToRaw)(this.state.content.getCurrentContent())),isActive:this.state.isActive,options:this.state.options}).then((function(e){e.data.created?t=!0:e.data.unauthorized?a=!0:e.data.pollAlreadyExist&&(n=!0)})).catch((function(e){console.log(e),r=!0}));case 7:this.setState({saved:t,unauthorized:a,pollAlreadyExist:n,errors:r}),window.scrollTo(0,5e3),!0===t&&setTimeout((function(){window.location.replace("/admin/allPolls?page=1")}),2e3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"newPost"},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(W.a,{className:"paper",elevation:8,style:{padding:"10px",margin:"auto",maxWidth:"1000px"}},r.a.createElement(V.a,{container:!0,spacing:1,className:"newPost",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"title",label:"Titolo",required:!0,disabled:this.state.saved,error:this.state.pollAlreadyExist,helperText:"Esiste gi\xe0 un sondaggio con lo stesso nome!",FormHelperTextProps:{hidden:!this.state.pollAlreadyExist},onChange:this.handleTitleChange,fullWidth:!0,defaultValue:"",variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{className:"field",id:"author",label:"Autore",required:!0,disabled:!0,defaultValue:this.props.username,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"editor"},r.a.createElement(M.Editor,{editorState:this.state.content,onEditorStateChange:this.handleContentChange}))),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"checks"},r.a.createElement(we.a,{control:r.a.createElement(qt.a,{color:"secondary",checked:this.state.check1,onChange:this.handleIsActiveChange,name:"check1"}),label:this.state.isActive?"SONDAGGIO ATTIVO":"SONDAGGIO NON ATTIVO"}))),r.a.createElement(V.a,{item:!0},this.showOptions(),this.addOption()),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",color:"secondary",size:"large",className:"SendButton",onClick:this.save,disabled:this.state.saved},"Salva")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non autorizzato")),r.a.createElement("div",{hidden:!this.state.saved},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Sondaggio pubblicato correttamente!")))))))}}]),a}(n.Component),Jt=a(441),Gt=a(86),Xt=a.n(Gt),Zt=a(87),Qt=a.n(Zt),Yt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(n.props.content)));return n.state={contentEdited:r,edit:!1,edited:!1,unauthorized:!1,noResults:!1,deleted:!1,errors:!1},n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleOpenEditTabs=n.handleOpenEditTabs.bind(Object(U.a)(n)),n.handleCloseEditTabs=n.handleCloseEditTabs.bind(Object(U.a)(n)),n.edit=n.edit.bind(Object(U.a)(n)),n.delete=n.delete.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleOpenEditTabs",value:function(){this.setState({edit:!0})}},{key:"handleCloseEditTabs",value:function(){this.setState({edit:!1})}},{key:"handleContentChange",value:function(e){this.setState({contentEdited:e})}},{key:"edit",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.put("/server/posts/"+this.props.urlTitle,{token:this.props.token,content:JSON.stringify(Object(L.convertToRaw)(this.state.contentEdited.getCurrentContent()))}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,a=!1,n=!1,!0!==this.props.isSuperUser&&this.props.username!==this.props.author){e.next=10;break}return e.next=6,I.a.patch("/server/posts/"+this.props.urlTitle,{token:this.props.token}).then((function(e){e.data.deleted?a=!0:e.data.unauthorized&&(t=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({unauthorized:t,deleted:a,errors:n}),!0===a&&window.location.reload(),e.next=11;break;case 10:this.setState({unauthorized:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"post"},r.a.createElement(H.a,{className:"card",elevation:5,style:{maxWidth:"800px",margin:"auto"}},r.a.createElement(Ge.a,{title:this.props.title,subheader:"Autore: "+this.props.author}),r.a.createElement(Jt.a,{className:"media",style:{height:120,width:250,margin:"auto"},image:this.props.image,title:this.props.image}),r.a.createElement(G.a,null,r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Data di pubblicazione: ",this.props.data.substring(0,10).replace(/-/g,"/")),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"ID: ",this.props._id),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Likes: ",this.props.likes),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Commenti: ",this.props.comments),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("a",{href:"/posts/"+this.props.urlTitle},"Vai al comunicato"))),r.a.createElement(J.a,{disableSpacing:!0},r.a.createElement(b.a,{"aria-label":"Modifica",color:"secondary",fontSize:"large",onClick:this.handleOpenEditTabs},r.a.createElement(Xt.a,null)),r.a.createElement(b.a,{"aria-label":"Elimina",color:"secondary",fontSize:"large",onClick:this.delete},r.a.createElement(Qt.a,null)),r.a.createElement(Xe.a,{open:this.state.edit,onClose:this.handleCloseEditTabs,fullWidth:!0,"aria-labelledby":"form-dialog-title",style:{maxHeight:"90%"}},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Modifica"),r.a.createElement(Qe.a,null,r.a.createElement("div",{style:{marginBottom:"80px"}},r.a.createElement(M.Editor,{editorState:this.state.contentEdited,onEditorStateChange:this.handleContentChange}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseEditTabs,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.edit,color:"secondary"},"Salva")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.edited},r.a.createElement(be.a,{severity:"success"},"Contenuto salvato con successo!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non autorizzato!"))))}}]),a}(n.Component),$t=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,posts:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/posts"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({posts:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/posts/numberOfPosts").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalPosts})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.posts.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono comunicati"));var e,t=[],a=Object(R.a)(this.state.posts);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Yt,{key:n._id,_id:n._id,title:n.title,urlTitle:n.urlTitle,data:n.data,content:n.content,image:n.image,author:n.author,comments:n.comments.length,likes:n.likes.length,token:this.props.token,username:this.props.username,isConfirmed:this.props.isConfirmed,isBanned:this.props.isBanned,isAdmin:this.props.isAdmin,isSuperUser:this.props.isSuperUser}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/admin/allPosts?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allPosts"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),Kt=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(n.props.content))),s=n.props.data,i=n.props.location;return n.state={contentEdited:r,data:s,location:i,edit:!1,edited:!1,unauthorized:!1,noResults:!1,deleted:!1,errors:!1},n.handleDataChange=n.handleDataChange.bind(Object(U.a)(n)),n.handleLocationChange=n.handleLocationChange.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleOpenEditTabs=n.handleOpenEditTabs.bind(Object(U.a)(n)),n.handleCloseEditTabs=n.handleCloseEditTabs.bind(Object(U.a)(n)),n.edit=n.edit.bind(Object(U.a)(n)),n.delete=n.delete.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleOpenEditTabs",value:function(){this.setState({edit:!0})}},{key:"handleCloseEditTabs",value:function(){this.setState({edit:!1})}},{key:"handleContentChange",value:function(e){this.setState({contentEdited:e})}},{key:"handleDataChange",value:function(e){this.setState({data:e.target.value}),e.target.value<this.defaultDate()?this.setState({pastDate:!0}):e.target.value>=this.defaultDate()&&this.setState({pastDate:!1})}},{key:"defaultDate",value:function(){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;return a<10&&(a="0"+a),(e.getFullYear()+"-"+a+"-"+t).toString()}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"edit",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.put("/server/events/"+this.props.eventID,{token:this.props.token,data:this.state.data,location:this.state.location,content:JSON.stringify(Object(L.convertToRaw)(this.state.contentEdited.getCurrentContent()))}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,a=!1,n=!1,!0!==this.props.isSuperUser&&this.props.username!==this.props.author){e.next=10;break}return e.next=6,I.a.patch("/server/events/"+this.props.eventID,{token:this.props.token}).then((function(e){e.data.deleted?a=!0:e.data.unauthorized&&(t=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({unauthorized:t,deleted:a,errors:n}),!0===a&&window.location.reload(),e.next=11;break;case 10:this.setState({unauthorized:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"event"},r.a.createElement(H.a,{className:"card",elevation:5,style:{maxWidth:"800px",margin:"auto"}},r.a.createElement(Ge.a,{title:this.props.title,subheader:"Autore: "+this.props.author}),r.a.createElement(Jt.a,{className:"media",style:{height:120,width:250,margin:"auto"},image:this.props.image,title:this.props.image}),r.a.createElement(G.a,null,r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Data: ",void 0===this.props.data?"":this.props.data.substring(0,10).replace(/-/g,"/")+" "+this.props.data.substring(11,16)),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Luogo: ",this.props.location),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"ID: ",this.props.eventID),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("a",{href:"/events/"+this.props.eventID},"Vai all'evento"))),r.a.createElement(J.a,{disableSpacing:!0},r.a.createElement(b.a,{"aria-label":"Modifica",color:"secondary",fontSize:"large",onClick:this.handleOpenEditTabs},r.a.createElement(Xt.a,null)),r.a.createElement(b.a,{"aria-label":"Elimina",color:"secondary",fontSize:"large",onClick:this.delete},r.a.createElement(Qt.a,null)),r.a.createElement(Xe.a,{open:this.state.edit,onClose:this.handleCloseEditTabs,fullWidth:!0,"aria-labelledby":"form-dialog-title",style:{maxHeight:"90%"}},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Modifica"),r.a.createElement(Qe.a,null,r.a.createElement("div",{style:{marginBottom:"80px"}},r.a.createElement(fe.a,{id:"data",label:"Data",type:"datetime-local",disabled:this.state.edited,error:this.state.pastDate,helperText:"La data deve essere futura!",FormHelperTextProps:{hidden:!this.state.pastDate},onChange:this.handleDataChange,defaultValue:void 0===this.state.data?"":this.state.data,className:"field",InputLabelProps:{shrink:!0}}),r.a.createElement(fe.a,{className:"field",id:"location",label:"Luogo",required:!0,disabled:this.state.edited,onChange:this.handleLocationChange,fullWidth:!0,defaultValue:this.state.location,variant:"standard"}),r.a.createElement(M.Editor,{editorState:this.state.contentEdited,onEditorStateChange:this.handleContentChange}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseEditTabs,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.edit,color:"secondary"},"Salva")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.edited},r.a.createElement(be.a,{severity:"success"},"Contenuto salvato con successo!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non autorizzato!"))),r.a.createElement("br",null))}}]),a}(n.Component),ea=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,events:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/events/allEvents"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({events:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/events/numberOfAllEvents").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalEvents})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.events.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono eventi"));var e,t=[],a=Object(R.a)(this.state.events);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(Kt,{key:n._id,eventID:n._id,title:n.title,author:n.author,data:n.data,location:n.location,image:n.image,content:n.content,token:this.props.token,username:this.props.username,isBanned:this.props.isBanned,isAdmin:this.props.isAdmin,isSuperUser:this.props.isSuperUser}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/admin/allEvents?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allEvents"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),ta=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=L.EditorState.createWithContent(Object(L.convertFromRaw)(JSON.parse(n.props.content))),s=n.props.isActive;return n.state={contentEdited:r,pollState:s,edit:!1,edited:!1,unauthorized:!1,noResults:!1,deleted:!1,errors:!1},n.getPollState=n.getPollState.bind(Object(U.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(U.a)(n)),n.handleStateChange=n.handleStateChange.bind(Object(U.a)(n)),n.handleOpenEditTabs=n.handleOpenEditTabs.bind(Object(U.a)(n)),n.handleCloseEditTabs=n.handleCloseEditTabs.bind(Object(U.a)(n)),n.edit=n.edit.bind(Object(U.a)(n)),n.delete=n.delete.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"getPollState",value:function(){return!0===this.props.isActive?r.a.createElement("span",{style:{color:"green"}},"Attivo"):r.a.createElement("span",{style:{color:"red"}},"Non attivo")}},{key:"handleOpenEditTabs",value:function(){this.setState({edit:!0})}},{key:"handleCloseEditTabs",value:function(){this.setState({edit:!1})}},{key:"handleContentChange",value:function(e){this.setState({contentEdited:e})}},{key:"handleStateChange",value:function(e){this.setState({pollState:e.target.checked})}},{key:"edit",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.put("/server/polls/"+this.props.pollID,{token:this.props.token,content:JSON.stringify(Object(L.convertToRaw)(this.state.contentEdited.getCurrentContent())),isActive:this.state.pollState}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,a=!1,n=!1,!0!==this.props.isSuperUser&&this.props.username!==this.props.author){e.next=10;break}return e.next=6,I.a.patch("/server/polls/"+this.props.pollID,{token:this.props.token}).then((function(e){e.data.deleted?a=!0:e.data.unauthorized&&(t=!0)})).catch((function(e){console.log(e),n=!0}));case 6:this.setState({unauthorized:t,deleted:a,errors:n}),!0===a&&window.location.reload(),e.next=11;break;case 10:this.setState({unauthorized:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"poll"},r.a.createElement(H.a,{className:"card",elevation:5,style:{maxWidth:"800px",margin:"auto"}},r.a.createElement(Ge.a,{title:this.props.title,subheader:"Autore: "+this.props.author}),r.a.createElement(G.a,null,r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Pubblicazione: ",this.props.data.substring(0,10).replace(/-/g,"/")),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"ID: ",this.props.pollID),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Votanti: ",this.props.voters),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},"Stato: ",this.getPollState()),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("a",{href:"/polls/"+this.props.pollID},"Vai al sondaggio"))),r.a.createElement(J.a,{disableSpacing:!0},r.a.createElement(b.a,{"aria-label":"Modifica",color:"secondary",fontSize:"large",onClick:this.handleOpenEditTabs},r.a.createElement(Xt.a,null)),r.a.createElement(b.a,{"aria-label":"Elimina",color:"secondary",fontSize:"large",onClick:this.delete},r.a.createElement(Qt.a,null)),r.a.createElement(Xe.a,{open:this.state.edit,onClose:this.handleCloseEditTabs,fullWidth:!0,"aria-labelledby":"form-dialog-title",style:{maxHeight:"90%"}},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Modifica"),r.a.createElement(Qe.a,null,r.a.createElement("div",{style:{marginBottom:"80px"}},r.a.createElement(M.Editor,{editorState:this.state.contentEdited,onEditorStateChange:this.handleContentChange}),r.a.createElement(we.a,{control:r.a.createElement(qt.a,{checked:this.state.pollState,onChange:this.handleStateChange,name:"pollState"}),label:this.state.pollState?"SONDAGGIO ATTIVO":"SONDAGGIO NON ATTIVO"}))),r.a.createElement(Ze.a,null,r.a.createElement(E.a,{onClick:this.handleCloseEditTabs,color:"secondary"},"Annulla"),r.a.createElement(E.a,{onClick:this.edit,color:"secondary"},"Salva")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.edited},r.a.createElement(be.a,{severity:"success"},"Contenuto salvato con successo!")),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))),r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Utente non autorizzato!"))),r.a.createElement("br",null))}}]),a}(n.Component),aa=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loaded:!1,noResults:!1,total:null,page:null,polls:[]},n.loading=n.loading.bind(Object(U.a)(n)),n.showContent=n.showContent.bind(Object(U.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/server/polls/allPolls"+this.props.location.search).then((function(e){return e.json()})).then((function(e){return t.setState({polls:e})})).catch(console.log);case 2:return e.next=4,fetch("/server/polls/numberOfAllPolls").then((function(e){return e.json()})).then((function(e){return t.setState({total:e.totalPolls})})).catch(console.log);case 4:this.setState({loaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){if(0===this.state.polls.length&&!0===this.state.loaded)return r.a.createElement("div",{className:"noResults"},r.a.createElement(be.a,{severity:"warning"},"Non ci sono sondaggi"));var e,t=[],a=Object(R.a)(this.state.polls);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(r.a.createElement(ta,{key:n._id,pollID:n._id,title:n.title,author:n.author,data:n.data,content:n.content,isActive:n.isActive,voters:n.voters.length,token:this.props.token,username:this.props.username,isBanned:this.props.isBanned,isAdmin:this.props.isAdmin,isSuperUser:this.props.isSuperUser}))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"handlePageChange",value:function(e,t){this.setState({page:t}),window.location.replace("/admin/allPolls?page="+t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"allPolls"},this.loading(),this.showContent(),r.a.createElement("div",{className:"pagination"},r.a.createElement(Te.a,{count:parseInt(this.state.total/5+1),page:parseInt(this.props.location.search.substring(6,9)),defaultPage:1,color:"secondary",onChange:this.handlePageChange,hideNextButton:!0,hidePrevButton:!0})))}}]),a}(n.Component),na=a(443),ra=a(447),sa=a(446),ia=a(442),oa=a(444),la=a(445),ca=a(226),da=a.n(ca),ua=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={users:[],loaded:!1,edit:!1,edited:!1,noResults:!1,unauthorized:!1,errors:!1},n.formatUsername=n.formatUsername.bind(Object(U.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.editUser=n.editUser.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=[],n=!1,r=!1,s=!1,e.next=7,I.a.post("/server/users",{token:this.props.token}).then((function(e){e.data.unauthorized?(n=!0,t=!0):e.data.noResults?(r=!0,t=!0):e.data.length>0&&(a=e.data,t=!0)})).catch((function(e){console.log(e),s=!0,t=!0}));case 7:this.setState({users:a,unauthorized:n,noResults:r,errors:s,loaded:t});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatUsername",value:function(e,t,a,n,s){return!0===a?r.a.createElement("span",{style:{color:"#ff0000"}},e):!0===s?r.a.createElement("span",{style:{color:"#00ff00"}},e):!0===n?r.a.createElement("span",{style:{color:"#ffba3c"}},e):!0===t?r.a.createElement("span",{style:{color:"#0000ff"}},e):r.a.createElement("span",{style:{color:"#c67bff"}},e)}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"editUser",value:function(e){window.location.replace("/admin/users/"+e)}},{key:"loading",value:function(){return r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"}))}},{key:"showContent",value:function(){var e=this;if(!0===this.state.loaded)return r.a.createElement(ia.a,{component:W.a,elevation:5},r.a.createElement(na.a,{className:"table","aria-label":"customized table"},r.a.createElement(oa.a,null,r.a.createElement(la.a,{style:{backgroundColor:"#f9ff9a",color:"#ffffff"}},r.a.createElement(sa.a,null,"AVATAR"),r.a.createElement(sa.a,{align:"center"},"USERNAME"),r.a.createElement(sa.a,{align:"center"},"NOME"),r.a.createElement(sa.a,{align:"center"},"COGNOME"),r.a.createElement(sa.a,{align:"center"},"DATA DI NASCITA"),r.a.createElement(sa.a,{align:"center"},"EMAIL"),r.a.createElement(sa.a,{align:"center"},"REGISTRAZIONE"),r.a.createElement(sa.a,{align:"center"},"VERIFICATO"),r.a.createElement(sa.a,{align:"center"},"ADMIN"),r.a.createElement(sa.a,{align:"center"},"SUPER USER"),r.a.createElement(sa.a,{align:"center"},"BLOCCATO"),r.a.createElement(sa.a,{align:"center"}))),r.a.createElement(ra.a,null,this.state.users.map((function(t){return r.a.createElement(la.a,{key:t._id},r.a.createElement(sa.a,{component:"th",scope:"row"},r.a.createElement(T.a,{src:t.avatar})),r.a.createElement(sa.a,{align:"center",style:{fontWeight:"bold"}},e.formatUsername(t.username,t.isConfirmed,t.isBanned,t.isAdmin,t.isSuperUser)),r.a.createElement(sa.a,{align:"center"},t.name),r.a.createElement(sa.a,{align:"center"},t.surname),r.a.createElement(sa.a,{align:"center"},void 0===t.dateOfBirth?"":t.dateOfBirth.substring(0,10).replace(/-/g,"/")),r.a.createElement(sa.a,{align:"center",style:{fontStyle:"italic"}},e.props.isSuperUser?t.email:"**********"+t.email.substring(t.email.search("@"),t.email.length)),r.a.createElement(sa.a,{align:"center"},void 0===t.registrationDate?"":t.registrationDate.substring(0,10).replace(/-/g,"/")+" "+t.registrationDate.substring(11,16)),r.a.createElement(sa.a,{align:"center"},t.isConfirmed?"SI":"NO"),r.a.createElement(sa.a,{align:"center"},t.isAdmin?"SI":"NO"),r.a.createElement(sa.a,{align:"center"},t.isSuperUser?"SI":"NO"),r.a.createElement(sa.a,{align:"center"},t.isBanned?"SI":"NO"),r.a.createElement(sa.a,{align:"center"},r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(b.a,{"aria-label":"edit",disabled:!e.props.isSuperUser,onClick:function(){return e.editUser(t._id)},color:"secondary"},r.a.createElement(da.a,null)))))})))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"allUsers__Admin",style:{padding:8}},this.loading(),this.showContent(),r.a.createElement("div",{className:"unauthorized",hidden:!this.state.unauthorized},r.a.createElement(be.a,{severity:"warning"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{className:"error",hidden:!this.state.errors},r.a.createElement(be.a,{severity:"error"},"Errore!")))}}]),a}(n.Component),ha=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={user:{},loaded:!1,edited:!1,unauthorized:!1,noResults:!1,errors:!1},n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(U.a)(n)),n.handleIsConfirmedChange=n.handleIsConfirmedChange.bind(Object(U.a)(n)),n.handleIsAdminChange=n.handleIsAdminChange.bind(Object(U.a)(n)),n.handleIsSuperUserChange=n.handleIsSuperUserChange.bind(Object(U.a)(n)),n.handleIsBannedChange=n.handleIsBannedChange.bind(Object(U.a)(n)),n.save=n.save.bind(Object(U.a)(n)),n.abort=n.abort.bind(Object(U.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleIsConfirmedChange",value:function(e){this.setState({isConfirmed:e.target.checked})}},{key:"handleIsAdminChange",value:function(e){this.setState({isAdmin:e.target.checked})}},{key:"handleIsSuperUserChange",value:function(e){this.setState({isSuperUser:e.target.checked})}},{key:"handleIsBannedChange",value:function(e){this.setState({isBanned:e.target.checked})}},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a={},n=!1,r=!1,s=!1,e.next=7,I.a.post("/server/users/"+this.props.match.params.userID,{token:this.props.token}).then((function(e){e.data.unauthorized?(n=!0,t=!0):e.data.noResults?(r=!0,t=!0):""!==e.data.username&&(a=e.data,t=!0)})).catch((function(e){console.log(e),s=!0,t=!0}));case 7:this.setState({user:a,email:a.email,isConfirmed:a.isConfirmed,isBanned:a.isBanned,isAdmin:a.isAdmin,isSuperUser:a.isSuperUser,unauthorized:n,noResults:r,errors:s,loaded:t});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,a=!1,n=!1,r=!1,e.next=6,I.a.put("/server/users/"+this.state.user._id,{token:this.props.token,email:this.state.email,isConfirmed:this.state.isConfirmed,isAdmin:this.state.isAdmin,isSuperUser:this.state.isSuperUser,isBanned:this.state.isBanned}).then((function(e){e.data.edited?t=!0:e.data.noResults?n=!0:e.data.unauthorized&&(a=!0)})).catch((function(e){console.log(e),r=!0}));case 6:this.setState({edited:t,noResults:n,unauthorized:a,errors:r}),!0===t&&(window.scrollTo(0,5e3),setTimeout((function(){window.location.replace("/admin/usersList")}),2e3));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"abort",value:function(){window.location.replace("/admin/usersList")}},{key:"render",value:function(){return!1===this.state.loaded?r.a.createElement("div",{className:"loading",hidden:this.state.loaded},r.a.createElement(F.a,{color:"secondary"})):!0===this.state.loaded?r.a.createElement("div",{className:"EditUser"},r.a.createElement("form",{className:"fields",onSubmit:this.handleSubmit},r.a.createElement(V.a,{container:!0,spacing:1,className:"username",alignItems:"flex-end"},r.a.createElement(V.a,{item:!0,style:{textAlign:"-webkit-center"}},r.a.createElement(T.a,{src:this.state.user.avatar,style:{width:200,height:200}}),r.a.createElement("br",null)),r.a.createElement(V.a,{item:!0},r.a.createElement(fe.a,{style:{width:"250px"},className:"field",id:"email",label:"Email",required:!0,disabled:this.state.edited,onChange:this.handleEmailChange,value:this.state.email,variant:"standard"})),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{className:"checks"},r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.isConfirmed,onChange:this.handleIsConfirmedChange,name:"isConfirmed"}),label:"VERIFICATO"}),r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.isAdmin,onChange:this.handleIsAdminChange,name:"isAdmin"}),label:"ADMIN"}),r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.isSuperUser,onChange:this.handleIsSuperUserChange,name:"isSuperUser"}),label:"SUPER USER"}),r.a.createElement(we.a,{control:r.a.createElement(Ce.a,{checked:this.state.isBanned,onChange:this.handleIsBannedChange,name:"isBanned"}),label:"BLOCCATO"}))),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.save,disabled:this.state.saved},"SALVA MODIFICHE")),r.a.createElement(V.a,{item:!0},r.a.createElement(E.a,{variant:"contained",size:"large",className:"SendButton",onClick:this.abort,disabled:this.state.saved},"INDIETRO")),r.a.createElement(V.a,{item:!0},r.a.createElement("div",{hidden:!this.state.errors},r.a.createElement(be.a,{variant:"filled",severity:"error",closeText:"close"},"Errore!")),r.a.createElement("div",{hidden:!this.state.unauthorized},r.a.createElement(be.a,{variant:"filled",severity:"warning",closeText:"close"},"Non disponi delle autorizzazioni necessarie!")),r.a.createElement("div",{hidden:!this.state.edited},r.a.createElement(be.a,{variant:"filled",severity:"success",closeText:"close"},"Modifiche salvate con successo!")))))):void 0}}]),a}(n.Component),ma=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"adminPanel"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h5",null,"Pannello Super User"))}}]),a}(n.Component),pa=a(228),va=a(448),fa=a(449),ga=a(450),Ea=a(227),ba=a.n(Ea),ya=(a(375),Object(va.a)({root:{width:"100%",position:"fixed",bottom:0,zIndex:9999},action:{color:"#fbc02d"}}));function wa(){var e=ya(),t=0;switch(window.location.pathname){case"/":t=0;break;case"/posts":t=1;break;case"/events":t=2;break;case"/polls":t=3;break;default:t=5}var a=r.a.useState(t),n=Object(pa.a)(a,2),s=n[0],i=n[1];return r.a.createElement(fa.a,{value:s,onChange:function(e,t){switch(i(t),t){case 0:window.location.replace("/");break;case 1:window.location.replace("/posts?page=1");break;case 2:window.location.replace("/events?page=1");break;case 3:window.location.replace("/polls?page=1");break;default:window.location.replace("/")}},showLabels:!0,className:e.root},r.a.createElement(ga.a,{className:e.action,label:"Home",icon:r.a.createElement(ba.a,null)}),r.a.createElement(ga.a,{className:e.action,label:"Comunicati",icon:r.a.createElement(Z.a,null)}),r.a.createElement(ga.a,{className:e.action,label:"Eventi",icon:r.a.createElement($.a,null)}),r.a.createElement(ga.a,{className:e.action,label:"Sondaggi",icon:r.a.createElement(ae.a,null)}))}var Ca=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement(wa,null))}}]),a}(n.Component);var ka=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement(o.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:ve}),r.a.createElement(l.b,{exact:!0,path:"/register",component:ke}),r.a.createElement(l.b,{exact:!0,path:"/login",component:ye}),r.a.createElement(l.b,{exact:!0,path:"/resetPassword",component:Oe}),r.a.createElement(l.b,{exact:!0,path:"/restorePassword/:username",component:je}),r.a.createElement(l.b,{exact:!0,path:"/confirm/:username",component:Ne}),r.a.createElement(l.b,{exact:!0,path:"/posts",component:Re}),r.a.createElement(l.b,{exact:!0,path:"/events",component:Fe}),r.a.createElement(l.b,{exact:!0,path:"/polls",component:qe}),r.a.createElement(l.b,{exact:!0,path:"/events/:eventID",component:ct}),r.a.createElement(l.b,{exact:!0,path:"/posts/:urlTitle",component:nt}),r.a.createElement(l.b,{exact:!0,path:"/polls/:pollID",component:ht}),r.a.createElement(pt,{exact:!0,path:"/profile",component:Tt}),r.a.createElement(vt,{exact:!0,path:"/admin",component:Rt}),r.a.createElement(vt,{exact:!0,path:"/admin/homepageTabs",component:Wt}),r.a.createElement(vt,{exact:!0,path:"/admin/allPosts",component:$t}),r.a.createElement(vt,{exact:!0,path:"/admin/allEvents",component:ea}),r.a.createElement(vt,{exact:!0,path:"/admin/allPolls",component:aa}),r.a.createElement(vt,{exact:!0,path:"/admin/newPost",component:Vt}),r.a.createElement(vt,{exact:!0,path:"/admin/newEvent",component:_t}),r.a.createElement(vt,{exact:!0,path:"/admin/newPoll",component:Ht}),r.a.createElement(vt,{exact:!0,path:"/admin/usersList",component:ua}),r.a.createElement(vt,{exact:!0,path:"/admin/users/:userID",component:ha}),r.a.createElement(ft,{exact:!0,path:"/superUser",component:ma}))),r.a.createElement(Ca,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ka,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){}},[[244,1,2]]]);
//# sourceMappingURL=main.846be736.chunk.js.map